function iniciaTablaEvalExAnte() { $("#tblEvalExAnte").DataTable().destroy(), $("#tblEvalExAnte").dataTable({ processing: !0, ajax: { url: ROOT + "EvaluacionExAnte/GetEvaluacionesExAnte", dataSrc: "", type: "POST" }, columns: [{ data: "IdBips", width: "4%" }, { data: "Ministerio", width: "20%" }, { data: "Servicio", width: "20%" }, { data: "Nombre", width: "30%", render: function (a, e, t, o) { return '<a href="' + (ROOT + "Formulario/Index?_id=" + encodeURIComponent(t.IdEncriptado)) + '" data-toggle="tooltip" data-placement="right" title="Click para abrir programa" target="_blank">' + t.Nombre + "</a>" } }, { data: "Version", width: "2%" }, { data: "PuntajeFinal", width: "2%" }, { data: "Calificacion", width: "5%" }, { data: null, orderable: !1, width: "3%", render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil != coordinador ? "disabled" : "", i = '<select id="cmbEval1" class="form-control input-sm cssEval' + t.IdPrograma + '1" onchange="cmbEvaluadores(' + t.IdPrograma + ',this.value, 1);" ' + n + ">"; return i += '<option value="-1">Seleccione</option>', $.each(aEvaluadores, function (a, e) { var o = e.Id == t.IdEvaluador1 ? "selected='selected'" : ""; i += '<option value="' + e.Id + '" ' + o + ">" + e.Nombre + "</option>" }), i += "</select>" } }, { data: null, orderable: !1, width: "3%", render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil != coordinador ? "disabled" : "", i = '<select id="cmbEval2" class="form-control input-sm cssEval' + t.IdPrograma + '2" onchange="cmbEvaluadores(' + t.IdPrograma + ',this.value, 2);" ' + n + ">"; return i += '<option value="-1">Seleccione</option>', $.each(aEvaluadores, function (a, e) { var o = e.Id == t.IdEvaluador2 ? "selected='selected'" : ""; i += '<option value="' + e.Id + '" ' + o + ">" + e.Nombre + "</option>" }), i += "</select>" } }, { data: "Revisión Sectorialista", orderable: !1, width: "1%", visible: 1 != tipoJefatura && 2 != tipoJefatura, render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil == soloLectura ? "disabled" : ""; return '<button id="btnComentSect" class="btn btn-info btn-xs" type="button" data-toggle="tooltip" data-placement="left" title="Enviar Comentarios" onclick="modelComentSect(' + t.IdPrograma + ')" ' + n + '><i class="fa fa-pencil-square-o"></i></button>' } }, { data: "Revisión Monitoreo", orderable: !1, width: "1%", visible: 1 === tipoJefatura, render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil == soloLectura ? "disabled" : ""; return '<button id="btnMonitoreo" class="btn btn-' + (t.IdEtapa == etapaCierre ? "success" : "primary") + ' btn-xs" type="button" data-toggle="tooltip" data-placement="left" title="Revisión Monitoreo" onclick="modelComentJefEval(' + t.IdPrograma + ',1)" ' + n + '><i class="fa fa-check-square-o"></i></button>' } }, { data: "Revisión Estudios", orderable: !1, width: "1%", visible: 2 === tipoJefatura, render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil == soloLectura ? "disabled" : ""; return '<button id="btnEstudios" class="btn btn-' + (t.IdEtapa == etapaCierre ? "success" : "primary") + ' btn-xs" type="button" data-toggle="tooltip" data-placement="left" title="Revisión Estudios" onclick="modelComentJefEval(' + t.IdPrograma + ',2);" ' + n + '><i class="fa fa-check-square-o"></i></button>' } }, { data: "Finalizar Evaluación", orderable: !1, width: "1%", visible: 1 === tipoJefatura, render: function (a, e, t, o) { var n = t.IdEtapa == etapaCierre || perfil == soloLectura ? "disabled" : ""; return '<button id="btnCerrarEval" class="btn btn-' + (t.IdEtapa == etapaCierre ? "success" : "warning") + ' btn-xs" type="button" data-toggle="tooltip" data-placement="left" title="Finalizar Revisión" onclick="cierraEvaluacionJefatura(' + t.IdPrograma + ');" ' + n + '><i class="fa fa-check-square"></i></button>' } }], order: [[0, "asc"]], language: { url: ROOT + "Scripts/dataTables.esp.js" }, initComplete: function (a, e) { $("#tblEvalExAnte_spFiltro").append('<button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>'), this.css("width", "100%"), $("[data-toggle=tooltip]").tooltip({ html: !0 }) }, drawCallback: function (a) { $("[data-toggle=tooltip]").tooltip({ html: !0 }) } }) } function modelComentJefEval(a, e) { $("#txtIdProgramaCJS" + e).val(a), $("#cmbEvaluador1CJS" + e).val($(".cssEval" + a + "1").val()), $("#cmbEvaluador2CJS" + e).val($(".cssEval" + a + "2").val()), $("#modalComentJefesSectorialistas" + e).modal("show") } function modelComentSect(a) { $("#txtIdProgramaCS").val(a), $("#cmbEvaluador1CS").val($(".cssEval" + a + "1").val()), $("#cmbEvaluador2CS").val($(".cssEval" + a + "2").val()), $("#modalComentariosSectorialistas").modal("show") } function modelEvaluacion(a) { $("#txtIdProgramaEvaluacion").val(a), $("#cargaPagina").fadeIn(), cargaPreguntasEval(a) } function cmbEvaluadores(a, e, t) { $(".cssEval" + a + (1 == t ? 2 : 1)).val() != e ? "-1" != e && ($("#txtIdPrograma").val(a), $("#txtIdEvaluador").val(e), $("#txtNumEvaluador").val(t), $("#modalMsjEvaluadores").modal("show")) : ($(".cssEval" + a + t + " option[value='-1']").prop("selected", !0), modalMsjEvaluaciones("<p>Evaluador ya asignado para esta evaluación, por favor seleccione otro</p>")) } function modalMsjEvaluaciones(a) { $("#msjInfoEval").empty(), $("#msjInfoEval").html(a), $("#modalMsjEvaluaciones").modal("show") } function caracteresPregEval(a) { caractPregEvaluacion("txtComentSegpres", 8e3, 1, a), caractPregEvaluacion("txtComentGeneral", 8e3, 2, a), caractPregEvaluacion("txtAtingencia", 8e3, 3, a), caractPregEvaluacion("txtCoherencia", 8e3, 4, a), caractPregEvaluacion("txtConsistencia", 8e3, 5, a), caractPregEvaluacion("txtAntPrograma", 8e3, 6, a), caractPregEvaluacion("txtDiagPrograma", 8e3, 7, a), caractPregEvaluacion("txtObjPobPrograma", 8e3, 8, a), caractPregEvaluacion("txtEstraPrograma", 8e3, 9, a), caractPregEvaluacion("txtIndicadores", 8e3, 10, a), caractPregEvaluacion("txtGastos", 8e3, 11, a) } function caractPregEvaluacion(a, e, t, o) { if ($("#" + a).val().length > 0) { var n = e, i = n - $("#" + a).val().length < 0 ? 0 : n - $("#" + a).val().length; $("#txtCount" + t).text("Caracteres restantes=" + i) } else $("#txtCount" + t).text("Caracteres restantes=" + e); o && $("#" + a).keyup(function () { var a = e, o = a - $(this).val().length < 0 ? 0 : a - $(this).val().length; $("#txtCount" + t).text("Caracteres restantes=" + o) }) } function validaBlancosEvaluacion(a, e) { var t = 0; return $("." + a).each(function (a, e) { if ("" != $.trim($(this).val())) return t = 1, !1 }), t } function cargaPreguntasEval(a) { var e = { url: ROOT + "EvaluacionExAnte/GetPreguntasEvaluaciones", data: { idPrograma: a }, type: "post", datatype: "json", success: function (a, e, t) { null != a.calificacion ? $('#cmbCalificacion option[value="' + a.calificacion + '"]').attr("selected", "selected") : $("#cmbCalificacion option:selected").removeAttr("selected"), $("#txtComentSegpres").val(a.comentSegpres), $("#txtComentGeneral").val(a.comentGeneral), $("#txtAtingencia").val(a.atingencia), $("#txtCoherencia").val(a.coherencia), $("#txtConsistencia").val(a.consistencia), $("#txtAntPrograma").val(a.antecPrograma), $("#txtDiagPrograma").val(a.diagPrograma), $("#txtObjPobPrograma").val(a.objPoblPrograma), $("#txtEstraPrograma").val(a.estrategiaPrograma), $("#txtIndicadores").val(a.indicadoresPrograma), $("#txtGastos").val(a.gastosPrograma), caracteresPregEval(0), $("#modalEvaluacion").modal("show"), $("#cargaPagina").fadeOut() }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(e) } function modalCerrarEvaluacion(a) { $("#cargaPagina").fadeIn(), $("#txtIdProgramaRevJef").val(a), $("#cmbEvaluador1").val($(".cssEval" + a + "1").val()), $("#cmbEvaluador2").val($(".cssEval" + a + "2").val()), $('#cmbTieneComentMonitoreo option[value="-1"]').prop("selected", !0).trigger("change"), $('#cmbTieneComentEstudio option[value="-1"]').prop("selected", !0).trigger("change"), $("#txtComentMonitoreo").val(""), $("#txtComentEstudio").val(""), $("#idInformePDF").val(""), $("#btnFinalizarRevJefatura").button("reset"); var e = { url: ROOT + "EvaluacionExAnte/GetComentariosJefaturas", data: { idPrograma: a }, type: "post", datatype: "json", success: function (a, e, t) { null != a.tieneComentMonitoreo && $('#cmbTieneComentMonitoreo option[value="' + a.tieneComentMonitoreo + '"]').prop("selected", !0).trigger("change"), $("#txtComentMonitoreo").val(a.comentMonitoreo), caractPregEvaluacion("txtComentMonitoreo", 8e3, "ComentMonitoreo", !1), null != a.tieneComentEstudios && $('#cmbTieneComentEstudio option[value="' + a.tieneComentEstudios + '"]').prop("selected", !0).trigger("change"), $("#txtComentEstudio").val(a.comentEstudios), caractPregEvaluacion("txtComentEstudio", 8e3, "ComentEstudio", !1), $("#modalRevisionJefaturas").modal("show"), $("#cargaPagina").fadeOut() }, error: function (a, e, t) { $("#cargaPagina").fadeOut(), modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(e) } function modalCrearIteracion(a, e) { $("#txtIdProgNuevaIteracion").val(a), $("#txtVersionProg").val(e), $("#modalMsjCrearNuevaIteracion").modal("show") } function cierraEvaluacionJefatura(a) { $("#txtIdProgramaFinRevJef").val(a), $("#modalMsjFinRevJef").modal("show") } $(document).ready(function () { if ($("ul.nav a").each(function () { $(this).hasClass("active") && $(this).removeClass("active") }), $("#menuExAnte").addClass("in"), $("#aMenuEvalExAnte").dropdown("toggle"), iniciaTablaEvalExAnte(), $("#btnMsjEvalAcep").click(function () { $(this).button("loading"); var a = $("#txtIdPrograma").val(), e = $("#txtIdEvaluador").val(), t = $("#txtNumEvaluador").val(), o = { url: ROOT + "EvaluacionExAnte/AsignaEvaluador", data: { idPrograma: a, idEvaluador: e, numEvaluador: t }, type: "post", datatype: "json", success: function (a, e, t) { $("#btnMsjEvalAcep").button("reset"), "ok" == a ? ($("#modalMsjEvaluadores").modal("hide"), modalMsjEvaluaciones("<p>Evaluador asignado con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(o) }), $("#btnModalEvalCancel").click(function () { var a = $("#txtIdPrograma").val(), e = $("#txtNumEvaluador").val(); $(".cssEval" + a + e + " option[value='-1']").prop("selected", !0) }), caracteresPregEval(1), $("#btnGuardarEvaluacion").click(function () { if (validaBlancosEvaluacion("validaEval")) { $(this).button("loading"); var a = {}; a.idPrograma = $("#txtIdProgramaEvaluacion").val(), a.calificacion = $("#cmbCalificacion option:selected").val(), a.comentSegpres = $("#txtComentSegpres").val(), a.comentGeneral = $("#txtComentGeneral").val(), a.atingencia = $("#txtAtingencia").val(), a.coherencia = $("#txtCoherencia").val(), a.consistencia = $("#txtConsistencia").val(), a.antecPrograma = $("#txtAntPrograma").val(), a.diagPrograma = $("#txtDiagPrograma").val(), a.objPoblPrograma = $("#txtObjPobPrograma").val(), a.estrategiaPrograma = $("#txtEstraPrograma").val(), a.indicadoresPrograma = $("#txtIndicadores").val(), a.gastosPrograma = $("#txtGastos").val(); var e = { url: ROOT + "EvaluacionExAnte/GuardaEvaluacion", data: { data: a }, type: "post", datatype: "json", success: function (a, e, t) { $("#btnGuardarEvaluacion").button("reset"), "ok" == a ? (iniciaTablaEvalExAnte(), modalMsjEvaluaciones("<p>Evaluación guardada con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(e) } else modalMsjEvaluaciones("<p>Ingrese al menos un valor</p>") }), $("#btnEnviarEvaluacion").click(function () { $("#modalMsjEnviaEvaluacion").modal("show") }), $("#btnMsjEnviaEvaluacionAcep").click(function () { $("#btnEnviarEvaluacion").button("loading"); var a = $("#txtIdProgramaEvaluacion").val(), e = {}; e.idPrograma = $("#txtIdProgramaEvaluacion").val(), e.calificacion = $("#cmbCalificacion option:selected").val(), e.comentSegpres = $("#txtComentSegpres").val(), e.comentGeneral = $("#txtComentGeneral").val(), e.atingencia = $("#txtAtingencia").val(), e.coherencia = $("#txtCoherencia").val(), e.consistencia = $("#txtConsistencia").val(), e.antecPrograma = $("#txtAntPrograma").val(), e.diagPrograma = $("#txtDiagPrograma").val(), e.objPoblPrograma = $("#txtObjPobPrograma").val(), e.estrategiaPrograma = $("#txtEstraPrograma").val(), e.indicadoresPrograma = $("#txtIndicadores").val(), e.gastosPrograma = $("#txtGastos").val(); var t = { url: ROOT + "EvaluacionExAnte/EnviaEvaluacion", data: { idPrograma: a, data: e }, type: "post", datatype: "json", success: function (a, e, t) { $("#btnEnviarEvaluacion").button("reset"), "ok" == a ? (iniciaTablaEvalExAnte(), $("#modalMsjEnviaEvaluacion").modal("hide"), $("#modalEvaluacion").modal("hide"), modalMsjEvaluaciones("<p>Evaluación enviada con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }), $("#btnMsjCierraEvalAcep").click(function () { $(this).button("loading"); var a = $("#txtIdProgCierraEval").val(), e = { url: ROOT + "EvaluacionExAnte/CierraEvaluacion", data: { idPrograma: a }, type: "post", datatype: "json", success: function (a, e, t) { $("#btnMsjCierraEvalAcep").button("reset"), "ok" == a ? ($("#modalMsjCerrarEvaluacion").modal("hide"), modalMsjEvaluaciones("<p>Evaluación cerrada con éxito</p>"), window.location.reload()) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(e) }), $("#btnMsjNuevaIteracionAcep").click(function () { $(this).button("loading"); var a = $("#txtIdProgNuevaIteracion").val(), e = $("#txtVersionProg").val(), t = { url: ROOT + "EvaluacionExAnte/NuevaIteracion", data: { idPrograma: a, versionPrograma: e }, type: "post", datatype: "json", success: function (a, e, t) { $("#btnMsjNuevaIteracionAcep").button("reset"), "ok" == a ? (iniciaTablaEvalExAnte(), $("#modalMsjCrearNuevaIteracion").modal("hide"), modalMsjEvaluaciones("<p>Nueva iteración creada con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }), $("#txtComentMonitoreo").val().length > 0) { var a = (e = 8e3) - $("#txtComentMonitoreo").val().length < 0 ? 0 : e - $("#txtComentMonitoreo").val().length; $("#txtCountComentMonitoreo").text("Caracteres restantes=" + a) } if ($("#txtComentMonitoreo").keyup(function () { var a = 8e3 - $(this).val().length < 0 ? 0 : 8e3 - $(this).val().length; $("#txtCountComentMonitoreo").text("Caracteres restantes=" + a) }), $("#txtComentEstudio").val().length > 0) { var e; a = (e = 8e3) - $("#txtComentEstudio").val().length < 0 ? 0 : e - $("#txtComentEstudio").val().length; $("#txtCountComentEstudio").text("Caracteres restantes=" + a) } $("#txtComentEstudio").keyup(function () { var a = 8e3 - $(this).val().length < 0 ? 0 : 8e3 - $(this).val().length; $("#txtCountComentEstudio").text("Caracteres restantes=" + a) }), "NO" == $("#cmbTieneComentMonitoreo option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentMonitoreo option:selected").val() ? $(".divPregComentMonitoreo").hide() : $(".divPregComentMonitoreo").show(), $("#cmbTieneComentMonitoreo").change(function () { "NO" == $("#cmbTieneComentMonitoreo option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentMonitoreo option:selected").val() ? ($(".divPregComentMonitoreo").hide(), $("#txtComentMonitoreo").val("")) : $(".divPregComentMonitoreo").show() }), "NO" == $("#cmbTieneComentEstudio option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentEstudio option:selected").val() ? $(".divPregComentEstudio").hide() : $(".divPregComentEstudio").show(), $("#cmbTieneComentEstudio").change(function () { "NO" == $("#cmbTieneComentEstudio option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentEstudio option:selected").val() ? ($(".divPregComentEstudio").hide(), $("#txtComentEstudio").val("")) : $(".divPregComentEstudio").show() }), "NO" == $("#cmbTieneComentJefSect1 option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentJefSect1 option:selected").val() ? $(".divPregComentJefSect1").hide() : $(".divPregComentJefSect1").show(), $("#cmbTieneComentJefSect1").change(function () { "NO" == $("#cmbTieneComentJefSect1 option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentJefSect1 option:selected").val() ? ($(".divPregComentJefSect1").hide(), $("#txtComentJefSect1").val("")) : $(".divPregComentJefSect1").show() }), "NO" == $("#cmbTieneComentJefSect2 option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentJefSect2 option:selected").val() ? $(".divPregComentJefSect2").hide() : $(".divPregComentJefSect2").show(), $("#cmbTieneComentJefSect2").change(function () { "NO" == $("#cmbTieneComentJefSect2 option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentJefSect2 option:selected").val() ? ($(".divPregComentJefSect2").hide(), $("#txtComentJefSect2").val("")) : $(".divPregComentJefSect2").show() }), "NO" == $("#cmbTieneComentariosSect option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentariosSect option:selected").val() ? $(".divComentariosSect").hide() : $(".divComentariosSect").show(), $("#cmbTieneComentariosSect").change(function () { "NO" == $("#cmbTieneComentariosSect option:selected").text().toUpperCase() || "-1" == $("#cmbTieneComentariosSect option:selected").val() ? $(".divComentariosSect").hide() : $(".divComentariosSect").show() }), $("#btnEnviarRevJefatura").click(function () { $("#modalMsjRevJef").modal("show") }), $("#btnMsjEnviaRevJefAcep").click(function () { $(this).button("loading"); var a = new FormData, e = document.getElementById("idInformePDF").files[0]; a.append("informePDF", e), a.append("idPrograma", $("#txtIdProgramaRevJef").val()), a.append("tieneComentMonitoreo", $("#cmbTieneComentMonitoreo").val()), a.append("comentMonitoreo", $("#txtComentMonitoreo").val()), a.append("tieneComentEstudio", $("#cmbTieneComentEstudio").val()), a.append("comentEstudio", $("#txtComentEstudio").val()), a.append("evaluador1", $("#cmbEvaluador1").val()), a.append("evaluador2", $("#cmbEvaluador2").val()); var t = { url: ROOT + "EvaluacionExAnte/revisarEvaluacion", data: a, type: "post", contentType: !1, processData: !1, success: function (a, e, t) { $("#btnMsjEnviaRevJefAcep").button("reset"), "ok" == a ? ($("#modalRevisionJefaturas").modal("hide"), $("#modalMsjRevJef").modal("hide"), modalMsjEvaluaciones("<p>Comentarios enviados con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }), $("#btnMsjEnviaFinRevJefAcep").click(function () { var a = new FormData, e = document.getElementById("idInformePDF").files[0]; if (null != e && "" != e) { $(this).button("loading"), a.append("informePDF", e), a.append("idPrograma", $("#txtIdProgramaFinRevJef").val()); var t = { url: ROOT + "EvaluacionExAnte/GetFinalizarRevisionExAnte", data: a, type: "post", contentType: !1, processData: !1, success: function (a, e, t) { $("#btnMsjEnviaFinRevJefAcep").button("reset"), "ok" == a ? ($("#modalRevisionJefaturas").modal("hide"), $("#modalMsjFinRevJef").modal("hide"), iniciaTablaEvalExAnte(), modalMsjEvaluaciones("<p>Informe enviado con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) } else modalMsjEvaluaciones("<p>Seleccione informe a enviar</p>") }), $("#btnEnviarCS").click(function () { var a = new FormData, e = document.getElementById("idInformeSectPDF").files[0]; $(this).button("loading"), a.append("informePDF", e), a.append("idPrograma", $("#txtIdProgramaCS").val()), a.append("evaluador1", $("#cmbEvaluador1CS").val()), a.append("evaluador2", $("#cmbEvaluador2CS").val()), a.append("comentarios", $("#cmbTieneComentariosSect option:selected").val()); var t = { url: ROOT + "EvaluacionExAnte/GetEnviarComentariosSect", data: a, type: "post", contentType: !1, processData: !1, success: function (a, e, t) { $("#btnEnviarCS").button("reset"), "ok" == a ? ($("#modalComentariosSectorialistas").modal("hide"), iniciaTablaEvalExAnte(), modalMsjEvaluaciones("<p>Comentarios enviados con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }), $("#btnEnviarCJS1").click(function () { var a = new FormData, e = document.getElementById("idInformeJefSectPDF1").files[0]; $(this).button("loading"), a.append("informePDF", e), a.append("idPrograma", $("#txtIdProgramaCJS1").val()), a.append("evaluador1", $("#cmbEvaluador1CJS1").val()), a.append("evaluador2", $("#cmbEvaluador2CJS1").val()), a.append("tipoJefatura", 1), a.append("comentarios", $("#txtComentJefSect1").val()); var t = { url: ROOT + "EvaluacionExAnte/GetEnviarComentJefSect", data: a, type: "post", contentType: !1, processData: !1, success: function (a, e, t) { $("#btnEnviarCJS1").button("reset"), "ok" == a ? ($("#modalComentJefesSectorialistas1").modal("hide"), iniciaTablaEvalExAnte(), modalMsjEvaluaciones("<p>Comentarios enviados con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }), $("#btnEnviarCJS2").click(function () { var a = new FormData, e = document.getElementById("idInformeJefSectPDF2").files[0]; $(this).button("loading"), a.append("informePDF", e), a.append("idPrograma", $("#txtIdProgramaCJS2").val()), a.append("evaluador1", $("#cmbEvaluador1CJS2").val()), a.append("evaluador2", $("#cmbEvaluador2CJS2").val()), a.append("tipoJefatura", 2), a.append("comentarios", $("#txtComentJefSect2").val()); var t = { url: ROOT + "EvaluacionExAnte/GetEnviarComentJefSect", data: a, type: "post", contentType: !1, processData: !1, success: function (a, e, t) { $("#btnEnviarCJS1").button("reset"), "ok" == a ? ($("#modalComentJefesSectorialistas2").modal("hide"), iniciaTablaEvalExAnte(), modalMsjEvaluaciones("<p>Comentarios enviados con éxito</p>")) : (modalMsjEvaluaciones("<p>" + a + "</p>"), console.log(a)) }, error: function (a, e, t) { modalMsjEvaluaciones("<p>" + t + "</p>"), console.log(t) } }; $.ajax(t) }) }), $(document).on("change", 'input[type="file"]', function () { var a = this.files[0].name, e = (this.files[0].size, a.split(".")); "pdf" != (e = e[e.length - 1]) && (modalMsjEvaluaciones("<p>El tipo de archivo seleccionado no es válido</p>"), this.value = "") });