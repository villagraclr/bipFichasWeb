@using SistemasBIPS.Models
@model EvaluacionExAnteViewModels
@{
    ViewBag.Title = "Ministerio de Desarrollo Social y Familia - Gobierno de Chile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section styles {
    @Styles.Render("~/Content/Fonts_min")
    @Styles.Render("~/Content/DataTable")
}

<div id="page-wrapper">
    <div class="row">
        <ol class="breadcrumb breadcrumbBIPS">
            <li><a><i class="fa fa-bars fa-fw"></i> Gores</a></li>
            <li><a><i class="fa fa-book fa-fw"></i>Evaluadores</a></li>
            <li class="active"><i class="fa fa-edit fa-fw"></i>Evaluador perfil</li>
        </ol>
    </div>
    <div class="row">
        <div class="col-lg-12" style="padding-left:0px;padding-right:0px">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover" cellspacing="0" id="tblEvalPerfil">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Gobierno Regional</th>
                            <th>Nombre</th>
                            <th>Versión</th>
                            <th>Calificación</th>
                            <th>Evaluador 1</th>
                            <th>Evaluador 2</th>
                            <th>Etapa</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!--Modal mensajes evaluador-->
<div id="modalAsignaEvaluador" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Advertencia</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="txtIdPrograma" value="" />
                <input type="hidden" id="txtIdEvaluador" value="" />
                <input type="hidden" id="txtNumEvaluador" value="" />
                <p>¿Está seguro que desea cambiar el evaluador asignado?</p>
            </div>
            <div class="modal-footer">
                <button id="btnModalCancelaEvaluador" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button id="btnModalAceptaEvaluador" type="button" data-loading-text="Guardando..." class="btn btn-primary">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!--Modal mensajes tipo oferta-->
<div id="modalAsignaTipoOferta" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Advertencia</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="txtIdPrograma" value="" />
                <input type="hidden" id="txtTipoOferta" value="" />
                <div id="msjSeleccionOferta"></div>
            </div>
            <div class="modal-footer">
                <button id="btnModalCancelaTipoOferta" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button id="btnModalAceptaTipoOferta" type="button" data-loading-text="Guardando..." class="btn btn-primary">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalIngresoExAnte" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Leer atentamente</strong></h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="txtIngresoIdPrograma" value="" />
                <div id="msjIngresoExAnte"></div>
            </div>
            <div class="modal-footer">
                <button id="btnModalCancelaIngresoExAnte" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button id="btnNoIngresoExAnte" type="button" onclick="ejecutarIngresoExAnte(false)" data-loading-text="Guardando..." class="btn btn-danger">No corresponde</button>
                <button id="btnIngresoExAnte" type="button" onclick="ejecutarIngresoExAnte(true)" data-loading-text="Guardando..." class="btn btn-success">Si Corresponde</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalResultados" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header"><h4 class="modal-title">Información</h4></div>
            <div class="modal-body" id="msjResultados"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnModalAceptaResultados" data-dismiss="modal">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalEnviarComentarios" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Enviar comentarios</strong></h4>
            </div>
            <div class="modal-body">
                <div id="msjEnviarComentarios"></div>
                <div class="file-upload-container">
                    <input type="file" id="archivoCargaComentarios" name="archivoCargaComentarios" class="file-input" style="display: none;">
                    <label id="lblArchivoCargaComentarios" for="archivoCargaComentarios" class="custom-file-upload" style="cursor: pointer; display: flex; justify-content: center; font-size: 18px; align-items: baseline;">
                        <i class="fa fa-upload" style="margin-right: 5px; font-size: 24px;"></i><span>Selecciona un archivo</span>
                    </label>
                </div>
                <input type="hidden" id="txtComentariosIdPrograma" value="" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnModalEnviarComentarios" data-loading-text="Enviando..." disabled>Enviar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalMsjEnviarComentarios" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Comentarios evaluación</strong></h4>
            </div>
            <div class="modal-body">
                <div id="txtMsjEnviarComentarios"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalEnviarCalificacion" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Enviar calificación</strong></h4>
            </div>
            <div class="modal-body">
                <div id="msjEnviarCalificacion"></div>
                <input type="hidden" id="txtCalificacionIdBips" value="" />
                <input type="hidden" id="txtCalificacionIdPrograma" value="" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnModalEnviarCalificacion" data-loading-text="Calificando...">Enviar calificación</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="modalMsjEnviarCalificacion" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Calificación evaluación</strong></h4>
            </div>
            <div class="modal-body">
                <div id="txtMsjEnviarCalificacion"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
@section scripts {
    @Scripts.Render("~/bundles/DataTable")
    <script type="text/javascript">
        var ROOT = "@Url.Content("~/")";
        var etapaCierre = "@Model.etapaCierre";
        var etapaRevisionJefe = "@Model.etapaRevisionJefe";
        var etapaProgramaCalificado = "@Model.etapaProgramaCalificado";
        var evaluadores = @Html.Raw(Json.Encode(Model.listaEvaluadores));
    </script>
    @Scripts.Render("~/bundles/EvalExAntePrograma")
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
}