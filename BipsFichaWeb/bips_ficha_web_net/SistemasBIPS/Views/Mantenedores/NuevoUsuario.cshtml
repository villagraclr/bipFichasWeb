@using SistemasBIPS.Models
@model UsuariosViewModels
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Ministerio de Desarrollo Social - Gobierno de Chile";
}
@section styles {
    @Styles.Render("~/Content/Fonts_min")
    @Styles.Render("~/Content/DataTable")
    <style type="text/css">
        th.dt-center, td.dt-center { text-align: center; }
        #tabUsuarios { border-bottom: 1px solid #337ab7; }
        #tabUsuarios a { border-radius: 0px; }
        .btnGS { margin-bottom: 3px; margin-right: 3px; }
    </style>
}
<div id="page-wrapper">
    <div class="row">        
        <ol class="breadcrumb breadcrumbBIPS">
            <li><a>Mantenedores</a></li>
            <li><a href="@Url.Action("Users","Mantenedores")">Usuarios</a></li>
            <li class="active">Nuevo Usuario</li>
        </ol>
    </div>
    <div class="row">
        @using (Html.BeginForm("GuardaUsuario", "Mantenedores", FormMethod.Post, new { role = "form", id = "nuevoUsuario" }))
        {
            @Html.AntiForgeryToken()
        <div class="col-lg-12" style="padding-left:0px;padding-right:0px">
            <ul class="nav nav-pills" id="tabUsuarios">
                <li role="presentation" class="active" style="width:33%;text-align:center;"><a id="aUsuario" href="#tabUsuario" data-toggle="pill">Usuario</a></li>                
                <li role="presentation" style="width:33.3%;text-align:center;"><a id="aFormularios" href="#tabFormularios" data-toggle="pill">Grupos</a></li>
                <li role="presentation" style="width:33.3%;text-align:center;"><a id="aPermisos" href="#tabPermisos" data-toggle="pill">Permisos</a></li>
            </ul>
            <div class="tab-content">
                    <!--Datos usuario-->
                    <div role="tabpanel" class="tab-pane fade active in" id="tabUsuario">
                        <div class="panel-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="txtEmail" class="col-sm-3 control-label" style="padding-left:0px; padding-right:0px;">Email (*)</label>
                                    <div class="col-sm-9" style="padding-left:15px;">
                                        <input type="email" name="model.dataUsuario.Email" class="form-control" id="txtEmail" placeholder="Ingrese email" style="width:70%;" value="@Model.dataUsuario.Email" @(String.IsNullOrEmpty(Model.dataUsuario.Email) ? String.Empty : "readonly")>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtNombre" class="col-sm-3 control-label" style="padding-left:0px; padding-right:0px;">Nombre (*)</label>
                                    <div class="col-sm-9" style="padding-left:15px;">
                                        <input type="text" name="model.dataUsuario.Nombre" class="form-control" id="txtNombre" placeholder="Ingrese nombre" style="width:70%;" value="@Model.dataUsuario.Nombre">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="cmbMinisterio" class="col-sm-3 control-label" style="padding-left:0px; padding-right:0px;">Ministerio (*)</label>
                                    <div class="col-sm-9" style="padding-left:15px;">
                                        <select id="cmbMinisterio" name="model.dataUsuario.Ministerio" class="form-control" style="width:70%;">
                                            <option value="-1">Seleccione</option>
                                            @foreach (var m in Model.listaMinistServ) {
                                                <option value="@m.Ministerios.IdParametro" @(Model.dataUsuario.Ministerio == m.Ministerios.IdParametro ? "selected" : string.Empty)>@m.Ministerios.Descripcion</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="cmbServicio" class="col-sm-3 control-label" style="padding-left:0px; padding-right:0px;">Servicio (*)</label>
                                    <div class="col-sm-9" style="padding-left:15px;">
                                        <select id="cmbServicio" name="model.dataUsuario.Servicio" class="form-control" style="width:70%;">
                                            <option value="-1">Seleccione</option>
                                            @if (Model.dataUsuario.Servicio != 0){
                                                int idMinisterio = 0;
                                                foreach (var s in Model.listaMinistServ){
                                                    foreach(var m in s.Servicios){
                                                        if (m.IdParametro == Model.dataUsuario.Servicio){
                                                            idMinisterio = int.Parse(m.Valor.ToString());
                                                            break;
                                                        }
                                                    }
                                                    if (idMinisterio != 0) { break; }
                                                }
                                                if (idMinisterio != 0){
                                                    foreach (var m in Model.listaMinistServ){
                                                        foreach (var s in m.Servicios.Where(p=>p.Valor == idMinisterio)){
                                                            <option value="@s.IdParametro" @(s.IdParametro == Model.dataUsuario.Servicio ? "selected" : string.Empty)>@s.Descripcion</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="cmbPerfil" class="col-sm-3 control-label" style="padding-left:0px; padding-right:0px;">Perfil (*)</label>
                                    <div class="col-sm-9 input-group" style="padding-left:15px;width:52%;">
                                        <select id="cmbPerfil" name="model.dataUsuario.Perfil" class="form-control">
                                            <option value="-1">Seleccione</option>
                                            @if (Model.listaPerfiles.Count > 0){
                                                foreach (var p in Model.listaPerfiles){
                                                    <option value="@p.IdPerfil">@p.Nombre</option>
                                                }
                                            }
                                        </select>
                                        <div class="input-group-btn">
                                            <button type="button" class="btn btn-default" aria-label="Help" id="btnVerPermisos"><span class="glyphicon glyphicon-question-sign"></span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Grupos formularios-->
                    <div role="tabpanel" class="tab-pane fade" id="tabFormularios">
                        <div class="panel-body" id="panelFormularios" style="padding:5px 0px 0px 0px;">
                            <div class="alert alert-info" role="alert" style="padding:5px 0px 5px 0px;margin-bottom:10px;">
                                <div class="row" style="margin-bottom:3px;">
                                    <div class="col-md-9 col-md-push-3" style="left:20%;" id="divMF"></div>
                                    <div class="col-md-3 col-md-pull-9" style="padding-left:10px;">Mis formularios seleccionados:</div>
                                </div>                                                                                               
                                <div class="row">
                                    <div class="col-md-9 col-md-push-3" style="left:20%;" id="divOF"></div>
                                    <div class="col-md-3 col-md-pull-9" style="padding-left:10px;">Otros formularios seleccionados:</div>
                                </div>  
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" cellspacing="0" id="tblGruposFormularios">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Descripción</th>
                                            <th>Mis Formularios</th>
                                            <th>Otros Formularios</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!--Permisos-->
                    <div role="tabpanel" class="tab-pane fade" id="tabPermisos">
                        <div class="panel-body" id="panelPermisos" style="padding:5px 0px 0px 0px;">
                            <div class="alert alert-info" role="alert" style="padding:5px 0px 5px 0px;margin-bottom:10px;">
                                <div class="row" style="margin-bottom:3px;">
                                    <div class="col-md-9 col-md-push-3" style="left:20%;" id="divGS"></div>
                                    <div class="col-md-3 col-md-pull-9" style="padding-left:10px;">Grupos seleccionados:</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-9 col-md-push-3" style="left:20%;" id="divPS"></div>
                                    <div class="col-md-3 col-md-pull-9" style="padding-left:10px;">Permisos seleccionados:</div>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" cellspacing="0" id="tblPermisosForm">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Año</th>
                                            <th>Tipo de formulario</th>
                                            <th>Permiso</th>
                                            <th>Asignar</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
            </div>
            @*<nav aria-label="...">
                <ul class="pager">
                    <li class="previous disabled" id="liAnterior"><a id="btnAnterior" href="#"><span aria-hidden="true">&larr;</span> Anterior</a></li>
                    <li class="next">
                        <button id="btnFinalizar" type="button" data-loading-text="Guardando..." class="btn btn-primary" style="float:right;display:none;">Finalizar</button>
                        <a id="btnSiguiente" href="#">Siguiente <span aria-hidden="true">&rarr;</span></a>
                    </li>
                </ul>
            </nav>*@
        </div>
        }
    </div>
</div>

<!--Modal Perfiles-->
<div id="modalPerfiles" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="modalTitlePerm"></h4>
            </div>
            <div class="modal-body" style="height:450px;overflow-y:auto;">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" cellspacing="0" id="tblPermisos">
                        <thead>
                            <tr>
                                <th>Permiso</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Aceptar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
@section scripts {
    @Scripts.Render("~/bundles/DataTable")
    <script type="text/javascript">
        
        $("#nuevoUsuario").submit(function(event){                       
            $("#cargaPagina").fadeIn();
        });
        $("#btnFinalizar").click(function(){
            if (!validaDatosUsuarios()){
                $(this).button('loading');
                $("#nuevoUsuario").submit();
            }else{
                $("#modalGblMensajesUsuarios").modal('show');
            }
        });
        function clickGrupoForm(obj, nombre) {
            if (obj.checked) {
                if (!$("#cbxH" + obj.value).length){
                    var inputID = $("<input>").attr("type","hidden").attr("name", "model.dataUsuario.MisFormularios").attr("id","cbxH" + obj.value).val(obj.value);
                    $("#nuevoUsuario").append($(inputID));                    
                }
                $('.cbkGrupForm2').each(function () {
                    if ($(this).val() == obj.value) {
                        $(this).removeAttr('checked');
                        //desmarcaFormSelecc(nombre, "divOF");
                        agregaFormSelecc(nombre, "divOF", 0, obj.value);
                    }
                });
                agregaFormSelecc(nombre, "divMF", 1, obj.value);
            }else{
                if ($("#cbxH" + obj.value).length){
                    $("#cbxH" + obj.value).remove();
                }                
                agregaFormSelecc(nombre, "divMF", 0, obj.value)
            }            
        }
        //function desmarcaFormSelecc(nombre, tipo){
        //    var objetos = "";
        //    var objFinal = "";
        //    $("#" + tipo).each(function () {
        //        objetos += ($(this).text() != "" ? $(this).text() + ", " : "");
        //    });            
        //    if (objetos.indexOf(nombre) >= 0){
        //        if (objetos.indexOf(',') >= 0){
        //            var arrayObj = objetos.split(',');
        //            if (arrayObj.length > 0){
        //                $.each(arrayObj, function (i, item) {
        //                    if (nombre != item.trim() && item.trim() != ""){
        //                        objFinal += item.trim() + ", ";
        //                    }
        //                });
        //            }
        //        }
        //    }
        //    if (objFinal.indexOf(',') >= 0){
        //        objFinal = objFinal.substring(0, objFinal.length - 2);
        //    }
        //    $("#" + tipo).html("<strong>" + objFinal + "</strong>");
        //}
        function agregaFormSelecc(nombre, tipo, check, id){
            var existe = 0;
            $("#" + tipo).each(function () {
                if ($(this).text() == nombre){
                    existe = 1;
                }
            });
            if (!existe && check){
                $("#" + tipo).append("<u style='margin-right: 10px;' id='" + id + "'>" + nombre + "</u>");
            }else {
                $("#" + id).remove();
            }
            agregaGrupSelecc();
        }
        function agregaGrupSelecc(id){
            var objetos = [];
            $("#divGS").empty();
            $("#divMF u").each(function () {
                var obj = { };
                obj.Id = $(this).attr('id');
                obj.Nombre = $(this).text();
                objetos.push(obj);
            });
            $("#divOF u").each(function () {
                var obj = { };
                obj.Id = $(this).attr('id');
                obj.Nombre = $(this).text();
                objetos.push(obj);
            });            
            if (objetos.length > 0){
                $.each(objetos, function (i, item) {
                    if (item != ""){
                        $("#divGS").append("<button type='button' class='btn btn-outline btn-primary btn-xs btnGS' value=" + item.Id + ">" + item.Nombre + "</button>");                            
                    }
                });
            }            
        }
        function clickGrupoForm2(obj, nombre) {
            if (obj.checked) {
                var noMarco = 0;
                if (!$("#cbxTodosH" + obj.value).length){
                    var inputID = $("<input>").attr("type","hidden").attr("name", "model.dataUsuario.OtrosFormularios").attr("id","cbxTodosH" + obj.value).val(obj.value);
                    $("#nuevoUsuario").append($(inputID));
                }
                $('.cbkGrupForm').each(function () {
                    if ($(this).val() == obj.value && $(this).is(':checked')) {
                        $("#" + obj.id).removeAttr('checked');
                        noMarco = 1;
                    }
                });
                if (!noMarco){
                    agregaFormSelecc(nombre, "divOF", 1, obj.value);
                }                
            }else{
                if ($("#cbxTodosH" + obj.value).length){
                    $("#cbxTodosH" + obj.value).remove();
                }
                agregaFormSelecc(nombre, "divOF", 0, obj.value);
            }
        }
        //function clickPerfiles(obj) {
        //    $('.cbkPerfiles').each(function () {
        //        if ($(this).attr('id') != obj.id) {
        //            $(this).removeAttr('checked');
        //        }
        //    });
        //}
        function asignaPermiso(nombre, id){ 
            var existe = 0;
            $("#divPS button").each(function () {
                if ($(this).val() == id){                    
                    $("#btnPS" + id).remove();
                    return false;
                }
            });
            $("#divPS").append("<button type='button' class='btn btn-outline btn-success btn-xs btnGS' data-toggle='tooltip' data-placement='bottom' title='Año: " + $("#cmbAnoPermisos" + id + " option:selected").val() + "<br /> Tipo Formulario: " + $("#cmbTipoFormPerm").text() + "<br /> Permiso: " + $("#cmbPermisoPerm").val() + "' id='btnPS" + id + "' value=" + id + ">" + nombre + " <span class='badge'>4</span></button>");
            $("#btnPS" + id).tooltip({ html: true });
        }
        function modalPerfiles(id,nombre) {
            var tablaPermisos = $('#tblPermisos').DataTable();
            tablaPermisos.destroy();
            $('#tblPermisos').dataTable({
                "autoWidth": false,
                "processing": true,
                "ajax": {
                "url": "@Url.Action("GetPermisos")",
                    "dataSrc": "",
                    "type": "POST",
                    "data": { "id" : id }
                },
                "columns": [
                    { "data": 'Permiso', "width": "30%" },
                    { "data": 'DescripcionPermiso', "width": "70%" }
                ],
                "order": [[0, "asc"]],
                "language": { "url": "@Url.Content("~/Scripts/dataTables.esp.js")" },
                "initComplete": function (settings, json) {
                        //Agrego objeto buscar
                    var copiaLargoTabla = $('#tblPermisos_length');
                    var largoTabla = $('#tblPermisos_length').parent('div');
                    largoTabla.empty();
                    largoTabla.html('<div class="form-group input-group" style="width:100%"><input id="schPermisos" type="search" class="form-control" placeholder="Buscar..." aria-controls="tblPermisos" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></span></div>');
                            //Cantidad de registros a mostrar
                    var divBusqueda = $('#tblPermisos_filter').parent('div');
                    divBusqueda.empty();
                    copiaLargoTabla.css('text-align', 'right');
                    copiaLargoTabla.find('select').removeClass('input-sm');
                    divBusqueda.html(copiaLargoTabla);

                    var tablaFormulariosGrupos = $('#tblPermisos').DataTable();
                    $('#schPermisos').on('keyup', function () {
                        tablaFormulariosGrupos.search($(this).val()).draw();
                    });
                    $('[name="tblPermisos_length"]').on('change', function () {
                        tablaFormulariosGrupos.page.len($(this).val()).draw();
                    });
                    this.css('width', '100%');
                    $('.col-sm-12').css({ 'padding-right': '0px', 'padding-left': '0px' });
                    $('.col-sm-6').css({ 'padding-right': '0px', 'padding-left': '0px' });
                    $('.col-sm-5').css({ 'padding-right': '0px', 'padding-left': '0px' });
                    $('.col-sm-7').css({ 'padding-right': '0px', 'padding-left': '0px' });
                },
                "drawCallback": function(settings) { $("[data-toggle=tooltip]").tooltip({ html: true }); }
            });            
            $('#modalTitlePerm').text(nombre);
            $('#modalPerfiles').modal('show')
        }
               
        function permisosDefault(){
            var data = [];            
            $("#divGS button").each(function () {
                var objetos = [$(this).text(),null,null,null,null,$(this).val()];
                data.push(objetos);
            });
            return data;
        }
        $(document).ready(function () {            
            $("#aPermisos").click(function(){
                var dataPermisosDefault = permisosDefault();
                var tablaPermisosForm = $('#tblPermisosForm').DataTable();
                tablaPermisosForm.destroy();
                $('#tblPermisosForm').dataTable({
                    "data": dataPermisosDefault,
                    "columns": [
                        { "title": 'Nombre' },
                        { 
                            "title": 'Año',
                            "data": null,
                            "className": "dt-center",
                            "orderable": false,
                            "render" : function (data, type, full, meta) {
                                var cmb = '<select class="form-control input-sm" id="cmbAnoPermisos' + data[5] + '"><option value="-1">Seleccione</option>';
                                @foreach (var a in Model.listaAnos){
                                    <text>
                                cmb += '<option value="' + @a + '">' + @a + '</option>';
                                    </text>
                                }
                                cmb += '</select>';
                                return cmb;
                            }
                        },
                        { 
                            "title": 'Tipo Formulario',
                            "data": null,
                            "className": "dt-center",
                            "orderable": false,
                            "render" : function (data, type, full, meta) {
                                return '<select class="form-control input-sm" id="cmbTipoFormPerm"><option>Seleccione</option></select>';
                            }
                        },
                        { 
                            "title": 'Permiso',
                            "data": null,
                            "className": "dt-center",
                            "orderable": false,
                            "render" : function (data, type, full, meta) {
                                return '<select class="form-control input-sm" id="cmbPermisoPerm"><option>Seleccione</option></select>';
                            }
                        },
                        { 
                            "title": 'Asignar',
                            "data": null,
                            "defaultContent": '',
                            "className": "dt-center",
                            "orderable": false,
                            "render" : function (data, type, full, meta) {                                
                                return '<button type="button" class="btn btn-primary btn-sm" onclick="asignaPermiso(\'' + data[0] + '\',' + data[5] + ');"><i class="fa fa-plus" aria-hidden="true"></i></button>';
                            }
                        }
                    ],
                    "order": [[0, "asc"]],
                    "language": { "url": "@Url.Content("~/Scripts/dataTables.esp.js")" },
                    "initComplete": function (settings, json) {
                        //Agrego objeto buscar
                        var copiaLargoTabla = $('#tblPermisosForm_length');
                        var largoTabla = $('#tblPermisosForm_length').parent('div');
                        largoTabla.empty();
                        largoTabla.html('<div class="form-group input-group" style="width:100%"><input id="schPermisosForm" type="search" class="form-control" placeholder="Buscar..." aria-controls="tblGruposFormularios" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></span></div>');
                        //Cantidad de registros a mostrar
                        var divBusqueda = $('#tblPermisosForm_filter').parent('div');
                        divBusqueda.empty();
                        copiaLargoTabla.css('text-align', 'right');
                        copiaLargoTabla.find('select').removeClass('input-sm');
                        divBusqueda.html(copiaLargoTabla);

                        var tblPermisosForm = $('#tblPermisosForm').DataTable();
                        $('#schPermisosForm').on('keyup', function () {
                            tblPermisosForm.search($(this).val()).draw();
                        });
                        $('[name="tblPermisosForm_length"]').on('change', function () {
                            tblPermisosForm.page.len($(this).val()).draw();
                        });
                        this.css('width', '100%');
                        $('.col-sm-12').css({ 'padding-right': '0px', 'padding-left': '0px' });
                        $('.col-sm-6').css({ 'padding-right': '0px', 'padding-left': '0px' });
                        $('.col-sm-5').css({ 'padding-right': '0px', 'padding-left': '0px' });
                        $('.col-sm-7').css({ 'padding-right': '0px', 'padding-left': '0px' });
                    }
                });
            });            
            $("#btnVerPermisos").click(function(){
                var id = $("#cmbPerfil option:selected").val();
                if (id != "-1"){
                    modalPerfiles(id,$("#cmbPerfil option:selected").text());
                }
            });
            $("#cmbMinisterio").change(function () {
                $("#cmbServicio").empty();
                $("#cmbServicio").append("<option value='-1'>Seleccione</option>");
                @foreach (var m in Model.listaMinistServ)
                {
                    <text>
                        if ($(this).val() == @m.Ministerios.IdParametro){
                            @foreach (var s in m.Servicios)
                            {
                                <text>$("#cmbServicio").append("<option value='@s.IdParametro'>@s.Descripcion</option>");</text>
                            }
                        }
                    </text>
                }
            });
            $('#tabUsuarios a').click(function (e) {
                if (e.target.id == 'aUsuario') {
                    if (!$('#liAnterior').hasClass('disabled')) {
                        $('#liAnterior').toggleClass('disabled');
                    }
                    $('#btnFinalizar').css('display', 'none');
                    $('#btnSiguiente').css('display', 'block');
                } else {
                    if ($('#liAnterior').hasClass('disabled')) {
                        $('#liAnterior').toggleClass('disabled');
                    }
                    if (e.target.id == 'aFormularios') {
                        $('#btnFinalizar').css('display', 'block');
                        $('#btnSiguiente').css('display', 'none');
                    } else {
                        $('#btnFinalizar').css('display', 'none');
                        $('#btnSiguiente').css('display', 'block');
                    }
                }
            });
            //$('#btnAnterior').click(function () {
            //    var iTab = null;
            //    $("#tabUsuarios li").each(function (i, e) {
            //        if ($(e).hasClass('active')) {
            //            iTab = i;
            //            return false;
            //        }
            //    });
            //    if (iTab > 0) {
            //        var tabNext = parseInt(iTab - 1);
            //        if (tabNext < $("#tabUsuarios li").length) {
            //            $('#tabUsuarios li:eq(' + tabNext + ') a').tab('show');
            //            if (tabNext == 0) {
            //                if (!$('#liAnterior').hasClass('disabled')) {
            //                    $('#liAnterior').toggleClass('disabled');
            //                }
            //            } else if ((tabNext + 1) < $("#tabUsuarios li").length) {
            //                $('#btnFinalizar').css('display', 'none');
            //                $('#btnSiguiente').css('display', 'block');
            //            }
            //        }
            //    }
            //});
            //$('#btnSiguiente').click(function () {
            //    var iTab = null;
            //    $("#tabUsuarios li").each(function (i, e) {
            //        if ($(e).hasClass('active')) {
            //            iTab = i;
            //            return false;
            //        }
            //    });
            //    var tabNext = parseInt(iTab + 1);
            //    if (tabNext < $("#tabUsuarios li").length) {
            //        $('#tabUsuarios li:eq(' + tabNext + ') a').tab('show');
            //        if (tabNext == 1) {
            //            $('#liAnterior').toggleClass('disabled');
            //        } else if ((tabNext + 1) == $("#tabUsuarios li").length) {
            //            $('#btnSiguiente').css('display', 'none');
            //            $('#btnFinalizar').css('display', 'block');
            //        }
            //    }
            //});
                               
        });
    </script>
}