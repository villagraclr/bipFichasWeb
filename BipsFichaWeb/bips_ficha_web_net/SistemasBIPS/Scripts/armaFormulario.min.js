const titulo = 407, titulo2 = 434, tabla = 413, anos = 415, etiqueta = 416, vacio = 414, etiquetaEspejo = 423, texto = 401, largoTexto = 601, textoReadonly = 422, numerico = 418, numericoSuma = 420, total = 421, textoGrande = 406, combo = 402, seleccione = 403, seleccioneVacio = 603, comboNumerico = 404, comboDinamico = 410, totalValidacion = 427, grupoCheckPadre = 425, tabObj = 405, tabEvaluacion = 435, grupoCheckHijo = 426, checkbox = 409, inputCheck = 417, largoNumerico = 606, grupoCheck = 424, inputBloquedo = 661, checkboxVacio = 429, checkboxUnico = 728, checkboxInline = 433, inputValidaciones = 436, etapaRevAnalista = 327, tabIndicProp = 7603, tabIndicComp = 7624, rolesHiloComent = [1, 2, 3, 7]; function creaFormulario(t, o, l) { 0 < t.length && ($.each(t, function (t, r) { $("#principal").append('<div class="tab-pane fade' + (tab == r.menuPadre.IdMenu || 0 == tab && 1 == r.menuPadre.Orden || 0 == tab && r.Orden == r.menuPadre.Orden ? " in active" : "") + '" id="tabForm' + r.menuPadre.Orden + '"><div class="row"><ul class="nav nav-tabs" id="ulForm' + r.menuPadre.IdMenu + '"></ul><div class="tab-content" id="content' + r.menuPadre.IdMenu + '">'), 0 < r.menuHijo.length && $.each(r.menuHijo, function (t, a) { var e, n, i = r.menuHijo.map(function (t) { return t.menuHijo.Orden }), i = Math.min.apply(null, i); a.menuHijo.IdPadre == r.menuPadre.IdTipoMenu && (n = null != (n = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdMenuHijo === a.menuHijo.IdMenu }) : null) && 0 < n.length ? n.length : "", e = "tabHijos" + a.menuHijo.IdMenu.toString() == tabForm ? 1 : 0, $("#ulForm" + r.menuPadre.IdMenu).append('<li role="presentation" id="tabHijos' + a.menuHijo.IdMenu + '"' + (0 < e ? tabForm == "tabHijos" + a.menuHijo.IdMenu.toString() ? "class=active" : "" : 1 == a.menuHijo.Orden || a.menuHijo.Orden == i ? "class=active" : "") + '><a href="#subNivel' + (r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString()) + '" data-toggle="tab" onclick="validaBlancos(false, ' + r.menuPadre.IdMenu + "," + a.menuHijo.IdMenu + ');">' + a.menuHijo.TipoMenu + '<span id="spnHijo' + a.menuHijo.IdMenu + '" class="badge" style="display: inline; padding: 0px 7px; margin-left: 5px; background-color: #8400CA;"></span><span id="spnTotalComent' + a.menuHijo.IdMenu + '" class="badge" style="display: ' + ("" == n ? "none" : "inline") + '; margin-left: 5px; background-color: #337ab7; color:#fff">' + n + "</span></a></li>"), $("#content" + r.menuPadre.IdMenu).append('<div class="tab-pane fade' + (0 < e ? tabForm == "tabHijos" + a.menuHijo.IdMenu.toString() ? " in active" : "" : 1 == a.menuHijo.Orden || a.menuHijo.Orden == i ? " in active" : "") + '" id="subNivel' + (r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString()) + '">'), $("#subNivel" + r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString()).append('<div class="col-lg-12 anti-padding-RL contenido-form"><div class="panel panel-default tab-sin-borde"><div class="panel-body form-horizontal" id="formHorizontal' + r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString() + '">'), etapa != etapaRevAnalista || $("#divCbk" + r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString()).length || (n = '<div id="divCbk' + r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString() + '" class="form-group form-group-sm" style="text-align: right;margin-right: 110px;"><div class="checkbox"><label><input type="checkbox" name="cbkMarcaTodos" value="' + r.menuPadre.IdMenu.toString() + a.menuHijo.IdMenu.toString() + '"> Marcar todos</label></div></div>', $("#formHorizontal" + r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString()).append(n)), 0 < a.preguntas.length) && $.each(a.preguntas, function (t, e) { agregaPregunta(e, r.menuPadre.Orden.toString() + a.menuHijo.Orden.toString(), 0, o, l, r.menuPadre.IdMenu, a.menuHijo.IdMenu) }) }) }), $("[data-toggle=tooltip]").tooltip({ html: !0 })) } function agregaPregunta(a, t, e, n, i, r, o) { var l = $.grep(n, function (t, e) { return t.IdPregunta === a.idPregunta }); if (a.tipoPregunta.IdParametro.toString() == titulo || a.tipoPregunta.IdParametro.toString() == titulo2) 0 < (M = (_ = a.pregunta).includes("#") ? _.split("#") : new String).length && (A = (A = 0) < M[1].indexOf("-") ? anoCabecera - parseInt(M[1].split("-")[1]) : 0 < M[1].indexOf("+") ? anoCabecera + parseInt(M[1].split("+")[1]) : anoCabecera, _ = M[0] + A.toString() + M[2]), $("#formHorizontal" + t).append('<div id="divPreg' + a.idPregunta.toString() + '"><p class="' + (a.tipoPregunta.IdParametro.toString() == titulo ? "bg-info" : "bg-primary") + '" style="padding:8px;font-size:12px;">' + _ + "</p></div>"); else if (a.tipoPregunta.IdParametro.toString() == tabla) { if (0 < a.valor_funcion.length) { var d = 0, s = 0, u = 0, g = (d = parseInt(a.valor_funcion[0].Valor), s = parseInt(a.valor_funcion[0].Valor2), u = parseFloat(a.valor_funcion[0].Valor.toString()) - parseFloat(d), u = Math.round(100 * u) / 100 != 0 ? parseFloat((Math.round(100 * u) / 100).toString().split(".")[1]) : 0, d -= parseInt(u.toString()), ""); if (0 != u) { g += "<thead>"; for (var p = 1; p <= parseInt(u.toString()) ; p++) { g += '<tr style="text-align: center;">'; for (var c = 1; c <= s; c++) 0 < a.preguntasGrupos.length && 0 < (F = $.grep(a.preguntasGrupos, function (t, e) { return t.fila === p && t.columna === c })).length && (g = (g += '<td style="width: ' + Math.round(100 / s) + '%">') + tiposPreguntas(F[0], e, 1, l, i, r, o) + "</td>"); g += "</tr>" } g += "</thead>" } if (0 < d) { g += "<tbody>"; for (p = parseInt(u.toString()) + 1; p <= d + u; p++) { g += "<tr>"; for (c = 1; c <= s; c++) 0 < a.preguntasGrupos.length && 0 < (F = $.grep(a.preguntasGrupos, function (t, e) { return t.fila === p && t.columna === c })).length && (g += "<td>", $.each(F, function (t, a) { l = $.grep(n, function (t, e) { return t.IdPregunta === a.idPregunta }), g += tiposPreguntas(a, e, 1, l, i, r, o) }), g += "</td>"); g += "</tr>" } g += "</tbody>" } } $("#formHorizontal" + t).append('<div class="table-responsive" id="divPreg' + a.idPregunta.toString() + '"><table id="tabla' + a.idPregunta + '" class="table table-bordered">' + g) } else { var g = "", z = a.tipoPregunta.IdParametro.toString() == grupoCheckPadre ? "margin-bottom: -38px;" : ""; if (a.tipoPregunta.IdCategoria.toString() == tabObj && a.tipoPregunta.IdParametro.toString() != tabEvaluacion) { if (g += '<div class="col-sm-12"><ul id="ultab' + a.idPregunta.toString() + '" class="nav nav-tabs">', 0 < a.valor_funcion.length) for (var b = a.valor_funcion[0].Valor; b <= a.valor_funcion[0].Valor2; b++) g += '<li role="presentation"' + (1 == b ? "class=active" : "") + '><a href="#tab' + (a.id.toString() + b.toString()) + '" data-toggle="tab">' + (0 < countObjeto(a.valores, 1, b) ? $.grep(a.valores, function (t, e) { return t.Orden === b && t.IdParametro != t.IdCategoria })[0].Descripcion : b.toString()) + "</a></li>"; if (g += '</ul><div id="tab' + a.idPregunta.toString() + '" class="tab-content">', 0 < a.valor_funcion.length) for (b = a.valor_funcion[0].Valor; b <= a.valor_funcion[0].Valor2; b++) { if (g += '<div class="tab-pane fade' + (1 == b ? " in active" : "") + '" id="tab' + (a.id.toString() + b.toString()) + '"><div class="panel panel-default tab-sin-borde"><div class="panel-body form-horizontal">', 0 < a.preguntasGrupos.length) for (var m = a.tipoPregunta.IdParametro.toString() == tabObj ? a.preguntasGrupos : $.grep(a.preguntasGrupos, function (t, e) { return t.valores[0].Valor === b }), v = 0; v < m.length; v++) { var N = m[v].tipoPregunta.IdParametro.toString() == grupoCheckPadre ? "margin-bottom: -38px;" : ""; if (m[v].tipoPregunta.IdParametro.toString() == tabla) { if (g += '<div class="table-responsive" id="divPregTab' + (m[v].idPregunta.toString() + b.toString()) + '"><table id="tablaTab' + (m[v].idPregunta.toString() + b.toString()) + '" class="table table-bordered">', 0 < m[v].valor_funcion.length) { d = 0, s = 0, u = 0; if (d = parseInt(m[v].valor_funcion[0].Valor), s = parseInt(m[v].valor_funcion[0].Valor2), u = parseFloat(m[v].valor_funcion[0].Valor.toString()) - parseFloat(d), u = Math.round(100 * u) / 100 != 0 ? parseFloat((Math.round(100 * u) / 100).toString().split(".")[1]) : 0, d -= parseInt(u.toString()), 0 != u) { g += "<thead>"; for (p = 1; p <= parseInt(u.toString()) ; p++) { g += '<tr style="text-align: center;">'; for (c = 1; c <= s; c++) 0 < m[v].preguntasTablas.length && 0 < (F = $.grep(m[v].preguntasTablas, function (t, e) { return t.fila === p && t.columna === c })).length && (F[0].idTab = b, g = (g += "<td>") + tiposPreguntas(F[0], e, 1, l, i, r, o) + "</td>"); g += "</tr>" } g += "</thead>" } if (0 < d) { g += "<tbody>"; for (p = parseInt(u.toString()) + 1; p <= d + u; p++) { g += "<tr>"; for (c = 1; c <= s; c++) 0 < a.preguntasTablas.length && 0 < (F = $.grep(a.preguntasTablas, function (t, e) { return t.fila === p && t.columna === c })).length && (F[0].idTab = b, H = F[0].idTab, l = $.grep(n, function (t, e) { return t.IdPregunta === F[0].idPregunta && t.IdTab === H }), g = (g += "<td>") + tiposPreguntas(F[0], e, 1, l, i, r, o) + "</td>"); g += "</tr>" } g += "</tbody>" } } g += "</table></div>" } else if (m[v].tipoPregunta.IdParametro.toString() == titulo) 0 < (M = (_ = m[v].pregunta).includes("#") ? _.split("#") : new String).length && (A = (A = 0) < M[1].indexOf("-") ? anoCabecera - parseInt(M[1].split("-")[1]) : 0 < M[1].indexOf("+") ? anoCabecera + parseInt(M[1].split("+")[1]) : anoCabecera, _ = M[0] + A.toString() + M[2]), g += '<div id="divPreg' + m[v].idPregunta.toString() + '"><p class="' + (m[v].tipoPregunta.IdParametro.toString() == titulo ? "bg-info" : "bg-primary") + '" style="padding:8px;font-size:12px;">' + _ + "</p></div>"; else if (m[v].tipoPregunta.IdCategoria.toString() == tabObj) { var S = "6757" == m[v].idPregunta ? "6772" : "6860", P = "6757" == m[v].idPregunta ? "4255" : "6861", f = "6757" == m[v].idPregunta ? "6773" : "6862", h = "6757" == m[v].idPregunta ? "6774" : "6863", I = "6757" == m[v].idPregunta ? "6775" : "6864", T = 1; g = (g += '<div class="col-sm-12">') + ('<ul id="ultabHijo' + m[v].idPregunta.toString() + '" class="nav nav-tabs">'); for (var y = 21; y <= 35; y++) 26 == y || 27 == y || 28 == y || ("6860" != S || 21 != y && 22 != y && 24 != y && 29 != y) && "6772" != S || (g += '<li role="presentation" ' + (21 == y ? "class=active" : "") + '><a href="#tabHijo' + (m[v].idPregunta.toString() + b.toString() + y.toString() + b.toString()) + '" data-toggle="tab">Sub. ' + y + "</a></li>"); g = (g += "</ul>") + ('<div id="tabHijo' + m[v].idPregunta.toString() + '" class="tab-content">'); for (y = 21; y <= 35; y++) { var x = "6860" == S && (21 == y || 22 == y || 24 == y || 29 == y); if (26 != y && 27 != y && 28 != y) { var C = 24 != y || x ? 15 : 25; if (x || "6860" != S) { if (g += '<div class="tab-pane fade ' + (21 == y ? "in active" : "") + '" id="tabHijo' + (m[v].idPregunta.toString() + b.toString() + y.toString() + b.toString()) + '"><div class="panel panel-default tab-sin-borde"><div class="panel-body form-horizontal">', 24 == y || 31 == y || 32 == y || 33 == y || x) { g = (g += '<div class="form-group form-group-sm" id="divPregTab' + P + b.toString() + y.toString() + '">') + '<label for="cmb' + P + b.toString() + y.toString() + '" class="col-sm-4 control-label">' + ("6862" == f && 24 != y ? "¿Cantidad de items?" : "¿Cantidad de asignaciones?") + '</label><div class="col-sm-6">', etapa == etapaRevAnalista && (g += '<div class="input-group">'); x = 0 < countObjeto(i, 2, parseInt(P)) ? "" : "disabled"; g = (g = (g = (g += '<input type="hidden" name="" value="' + P + '" />') + '<input type="hidden" id="numTab' + P + b.toString() + y.toString() + '" name="" value="' + (b.toString() + y.toString()) + '" />') + '<input type="hidden" id="idLlave' + P + b.toString() + y.toString() + '" value="' + T + '" />') + '<select class="form-control input-sm numTab-' + b.toString() + '" name="' + P + "_" + (b.toString() + y.toString()) + '" style="border-radius:3px;" id="cmb' + P + b.toString() + y.toString() + '" ' + x + ">"; for (var k = 1; k <= C; k++) { var j = 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(P) && t.IdTab === parseInt(b.toString() + y.toString()) }) : ""; g += '<option value="' + k + '"' + (0 < j.length && parseInt(j[0].Respuesta.toString()) == k ? " selected=selected" : "") + ">" + k + "</option>" } g += "</select>", etapa == etapaRevAnalista && (g += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + P + '"></span></div>'), g = (g += '</div></div><div class="col-sm-12">') + '<ul id="ultabNieto' + (b.toString() + y.toString()) + S + T.toString() + '" class="nav nav-tabs">'; for (var R = 1; R <= C; R++) g += '<li role="presentation" ' + (1 == R ? "class=active" : "") + '><a href="#tabNieto' + (b.toString() + y.toString() + R.toString()) + S + T.toString() + '" data-toggle="tab">' + R + "</a></li>"; g = g + '</ul><div id="tabNieto' + S + '" class="tab-content">'; for (R = 1; R <= C; R++) { j = (g = (g += '<div class="tab-pane fade ' + (1 == R ? "in active" : "") + '" id="tabNieto' + (b.toString() + y.toString() + R.toString()) + S + T.toString() + '"><div class="panel panel-default tab-sin-borde"><div class="panel-body form-horizontal"><div class="form-group form-group-sm" id="divPregTab' + (b.toString() + y.toString() + R.toString()) + f + T.toString() + '">') + ('<label for="txt' + (b.toString() + y.toString() + R.toString()) + f + T.toString() + '" class="col-sm-4 control-label">Item</label>') + '<div class="col-sm-6">', etapa == etapaRevAnalista && (g += '<div class="input-group">'), g = (g += '<input type="hidden" name="" value="' + f + '" />') + ('<input type="hidden" id="numTab' + (b.toString() + y.toString()) + f + '" name="" value="' + (b.toString() + y.toString() + R.toString() + T.toString()) + '" />'), "6862" == f ? (g += '<select class="form-control input-sm numTab-' + b.toString() + '" name="' + f + "_" + (b.toString() + y.toString() + R.toString() + T.toString()) + '" style="border-radius:3px;" id="cmb' + (b.toString() + y.toString() + R.toString()) + f + T.toString() + '" ' + (0 < countObjeto(i, 2, parseInt(f)) ? "" : "disabled") + ">", j = 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(f) && t.IdTab === parseInt(b.toString() + y.toString() + R.toString() + T.toString()) }) : "", 21 == y ? g = (g = (g = (g += '<option value="1"' + (0 < j.length && 1 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">01-Personal de Planta</option>") + '<option value="2"' + (0 < j.length && 2 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">02-Personal a Contrata</option>") + '<option value="3"' + (0 < j.length && 3 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">03-Otras Remuneraciones</option>") + '<option value="4"' + (0 < j.length && 4 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">04-Otros Gastos en Personal</option>" : 22 == y ? g = (g = (g = (g = (g = (g = (g = (g = (g = (g = (g = (g += '<option value="5"' + (0 < j.length && 5 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">01-Alimentos y Bebidas</option>") + '<option value="6"' + (0 < j.length && 6 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">02-Textiles, Vestuario y Calzado</option>") + '<option value="7"' + (0 < j.length && 7 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">03-Combustibles y Lubricantes</option>") + '<option value="8"' + (0 < j.length && 8 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">04-Materiales de Uso o Consumo</option>") + '<option value="9"' + (0 < j.length && 9 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">05-Servicios Básicos</option>") + '<option value="10"' + (0 < j.length && 10 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">06-Mantenimiento y Reparaciones</option>") + '<option value="11"' + (0 < j.length && 11 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">07-Publicidad y Difusión</option>") + '<option value="12"' + (0 < j.length && 12 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">08-Servicios Generales</option>") + '<option value="13"' + (0 < j.length && 13 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">09-Arriendos</option>") + '<option value="14"' + (0 < j.length && 14 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">10-Servicios Financieros y de Seguros</option>") + '<option value="15"' + (0 < j.length && 15 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">11-Servicios</option>") + '<option value="16"' + (0 < j.length && 16 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">12-Otros Gastos en Bienes y Servicios de Consumo</option>" : 24 == y ? g = (g = (g += '<option value="17"' + (0 < j.length && 17 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">01-Transf. al sector privado (1-3)</option>") + '<option value="18"' + (0 < j.length && 18 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">02-Al Gobierno Central</option>") + '<option value="19"' + (0 < j.length && 19 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">03-Transf. a otras entidades públicas</option>" : 29 == y && (g = (g += '<option value="25"' + (0 < j.length && 25 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">06-Equipos Informáticos</option>") + '<option value="26"' + (0 < j.length && 26 == parseInt(j[0].Respuesta.toString()) ? " selected=selected" : "") + ">07-Programas Informáticos</option>"), g += "</select>") : (j = 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(f) && t.IdTab === parseInt(b.toString() + y.toString() + R.toString() + T.toString()) }) : "", g += '<input type="text" name="' + f + "_" + (b.toString() + y.toString() + R.toString() + T.toString()) + '" class="form-control input-sm numTab-' + b.toString() + '" style="border-radius:3px;" id="txt' + (b.toString() + y.toString() + R.toString()) + f + T.toString() + '" maxlength="15" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < j.length ? j[0].Respuesta.toString() : "") + '" ' + (0 < countObjeto(i, 2, parseInt(f)) ? "" : "readonly") + " />"), etapa == etapaRevAnalista && (g += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + f + '"></span></div>'), g += "</div></div>", "6863" == h && 24 != y || (j = 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(h) && t.IdTab === parseInt(b.toString() + y.toString() + R.toString() + T.toString()) }) : "", g = (g += '<div class="form-group form-group-sm" id="divPregTab' + (b.toString() + y.toString() + R.toString()) + h + T.toString() + '">') + '<label for="txt' + (b.toString() + y.toString() + R.toString()) + h + T.toString() + '" class="col-sm-4 control-label">Asignación</label><div class="col-sm-6">', etapa == etapaRevAnalista && (g += '<div class="input-group">'), g = (g = (g += '<input type="hidden" name="" value="' + h + '" />') + '<input type="hidden" id="numTab' + (b.toString() + y.toString()) + h + T.toString() + '" name="" value="' + (b.toString() + y.toString() + R.toString() + T.toString()) + '" />') + '<input type="text" name="' + h + "_" + (b.toString() + y.toString() + R.toString() + T.toString()) + '" class="form-control input-sm numTab-' + b.toString() + '" style="border-radius:3px;" id="txt' + (b.toString() + y.toString() + R.toString()) + h + T.toString() + '" maxlength="15" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < j.length ? j[0].Respuesta.toString() : "") + '" ' + (0 < countObjeto(i, 2, parseInt(h)) ? "" : "readonly") + " />", etapa == etapaRevAnalista && (g += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + h + '"></span></div>'), g += "</div></div>"), 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(I) && t.IdTab === parseInt(b.toString() + y.toString() + R.toString() + T.toString()) }) : ""); g = (g += '<div class="form-group form-group-sm" id="divPregTab' + (b.toString() + y.toString() + R.toString()) + I + T.toString() + '">') + ('<label for="txt' + (b.toString() + y.toString() + R.toString()) + I + T.toString() + '" class="col-sm-4 control-label">Gasto ($miles)</label>') + '<div class="col-sm-6">', etapa == etapaRevAnalista && (g += '<div class="input-group">'), g = (g = (g += '<input type="hidden" name="" value=" ' + I + '" />') + ('<input type="hidden" id="numTab' + (b.toString() + y.toString()) + I + T.toString() + '" name="" value="' + (b.toString() + y.toString() + R.toString() + T.toString()) + '" />')) + ('<input type="text" name="' + I + "_" + (b.toString() + y.toString() + R.toString() + T.toString()) + '" class="form-control input-sm numTab-' + b.toString() + " suma" + m[v].idPregunta.toString() + '" style="border-radius:3px;" id="txt' + (b.toString() + y.toString() + R.toString()) + I + T.toString() + '" maxlength="15" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < j.length ? j[0].Respuesta.toString() : "") + '" ' + (0 < countObjeto(i, 2, parseInt(I)) ? "" : "readonly") + " />"), etapa == etapaRevAnalista && (g += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + I + '"></span></div>'), g += "</div></div></div></div></div>" } } else { j = 0 < n.length ? $.grep(n, function (t, e) { return t.IdPregunta === parseInt(I) && t.IdTab === parseInt(b.toString() + y.toString() + T.toString()) }) : ""; g = (g += '<div class="form-group form-group-sm" id="divPregTab' + (b.toString() + y.toString()) + I + T.toString() + '">') + '<label for="txt' + (b.toString() + y.toString()) + I + T.toString() + '" class="col-sm-4 control-label">Gasto ($miles)</label><div class="col-sm-6">', etapa == etapaRevAnalista && (g += '<div class="input-group">'), g = (g = (g += '<input type="hidden" name="" value="' + I + '" />') + '<input type="hidden" id="numTab' + (b.toString() + y.toString()) + I + T.toString() + '" name="" value="' + (b.toString() + y.toString() + T.toString()) + '" />') + '<input type="text" name="' + I + "_" + (b.toString() + y.toString() + T.toString()) + '" class="form-control input-sm numTab-' + b.toString() + " suma" + m[v].idPregunta.toString() + '" style="border-radius:3px;" id="txt' + (b.toString() + y.toString()) + I + T.toString() + '" maxlength="15" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < j.length ? j[0].Respuesta.toString() : "") + '" ' + (0 < countObjeto(i, 2, parseInt(I)) ? "" : "readonly") + " />", etapa == etapaRevAnalista && (g += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + I + '"></span></div>') } g = g + "</div></div>" + "</div></div></div>", T++ } } } g += "</div></div>" } else { a.idPregunta != tabIndicProp && a.idPregunta != tabIndicComp || 3039 != m[v].idPregunta && 3045 != m[v].idPregunta && 116 != m[v].idPregunta && 118 != m[v].idPregunta && 7621 != m[v].idPregunta && 7629 != m[v].idPregunta || (g += '<div class="col-xs-4">'), m[v].idTab = b, m[v].id = m[v].idPregunta.toString() + b.toString(); var O = m[v].idPregunta, H = m[v].idTab; l = $.grep(n, function (t, e) { return t.IdPregunta === O && t.IdTab === H }), g = (g += '<div class="form-group form-group-sm" id="divPregTab' + (m[v].idPregunta.toString() + b.toString()) + '" style="' + N + '">') + tiposPreguntas(m[v], e, 2, l, i, r, o) + "</div>", a.idPregunta != tabIndicProp && a.idPregunta != tabIndicComp || 3040 != m[v].idPregunta && 3048 != m[v].idPregunta && 117 != m[v].idPregunta && 121 != m[v].idPregunta && 7622 != m[v].idPregunta && 7630 != m[v].idPregunta || (g += "</div>", 7622 != m[v].idPregunta && 7630 != m[v].idPregunta) || (g += '<div class="col-xs-12"></div>') } } g += "</div></div></div>" } } else if (a.tipoPregunta.IdParametro.toString() == tabEvaluacion) { if (g = (g += '<div class="col-sm-12">') + ('<ul id="ultab' + a.idPregunta.toString() + '" class="nav nav-tabs">'), 0 < a.valor_funcion.length) for (b = a.valor_funcion[0].Valor; b <= a.valor_funcion[0].Valor2; b++) g += '<li role="presentation" ' + (1 == b ? "class=active" : "") + '><a href="#tab' + (a.id.toString() + b.toString()) + '" data-toggle="tab">' + (0 < countObjeto(a.valores, 1, b) ? $.grep(a.valores, function (t, e) { return t.Orden === b && t.IdParametro != t.IdCategoria })[0].Descripcion : b.toString()) + "</a></li>"; if (g = (g += "</ul>") + ('<div id="tab' + a.idPregunta.toString() + '" class="tab-content">'), 0 < a.valor_funcion.length) for (b = a.valor_funcion[0].Valor; b <= a.valor_funcion[0].Valor2; b++) { if (g += '<div class="tab-pane fade ' + (1 == b ? "in active" : "") + '" id="tab' + (a.id.toString() + b.toString()) + '"><div class="panel panel-default tab-sin-borde"><div class="panel-body form-horizontal">', 0 < a.preguntasGrupos.length) { var V = "7028" == a.idPregunta.toString() || "7058" == a.idPregunta.toString() ? a.preguntasGrupos : $.grep(a.preguntasGrupos, function (t, e) { return t.menuGrupo === b }); if (0 < V.length) for (var _, M, A, v = 0; v < V.length; v++) if (V[v].tipoPregunta.IdParametro.toString() == titulo || V[v].tipoPregunta.IdParametro.toString() == titulo2) 0 < (M = (_ = V[v].pregunta).includes("#") ? _.split("#") : new String).length && (A = (A = 0) < M[1].indexOf("-") ? anoCabecera - parseInt(M[1].split("-")[1]) : 0 < M[1].indexOf("+") ? anoCabecera + parseInt(M[1].split("+")[1]) : anoCabecera, _ = M[0] + A.toString() + M[2]), g += '<div id="divPreg' + V[v].idPregunta.toString() + '"><p class="' + (V[v].tipoPregunta.IdParametro.toString() == titulo ? "bg-info" : "bg-primary") + '" style="padding:8px;font-size:12px;">' + _ + "</p></div>"; else if (V[v].tipoPregunta.IdParametro.toString() == tabla) { if (g += '<div class="table-responsive" id="divPregTab' + (V[v].idPregunta.toString() + b.toString()) + '"><table id="tablaTab' + (V[v].idPregunta.toString() + b.toString()) + '" class="table table-bordered">', 0 < V[v].valor_funcion.length) { d = 0, s = 0, u = 0; if (d = parseInt(V[v].valor_funcion[0].Valor), s = parseInt(V[v].valor_funcion[0].Valor2), u = parseFloat(V[v].valor_funcion[0].Valor.toString()) - parseFloat(d), u = Math.round(100 * u) / 100 != 0 ? parseFloat((Math.round(100 * u) / 100).toString().split(".")[1]) : 0, d -= parseInt(u.toString()), 0 != u) { g += "<thead>"; for (p = 1; p <= parseInt(u.toString()) ; p++) { g += '<tr style="text-align: center;">'; for (c = 1; c <= s; c++) 0 < a.preguntasTablas.length && 0 < (F = $.grep(a.preguntasTablas, function (t, e) { return t.fila === p && t.columna === c && t.IdTabla === V[v].idPregunta })).length && (F[0].idTab = b, g = (g += "<td>") + tiposPreguntas(F[0], e, 1, l, i, r, o) + "</td>"); g += "</tr>" } g += "</thead>" } if (0 < d) { g += "<tbody>"; for (p = parseInt(u.toString()) + 1; p <= d + u; p++) { g += "<tr>"; for (var F, c = 1; c <= s; c++) 0 < a.preguntasTablas.length && 0 < (F = $.grep(a.preguntasTablas, function (t, e) { return t.fila === p && t.columna === c && t.IdTabla === V[v].idPregunta })).length && (F[0].idTab = b, H = F[0].idTab, l = $.grep(n, function (t, e) { return t.IdPregunta === F[0].idPregunta && t.IdTab === H }), g = (g += "<td>") + tiposPreguntas(F[0], e, 1, l, i, r, o) + "</td>"); g += "</tr>" } g += "</tbody>" } } g += "</table></div>" } else { O = V[v].idPregunta; l = $.grep(n, function (t, e) { return t.IdPregunta === O }), g = (g += '<div class="form-group form-group-sm" id="divPregTab' + (V[v].idPregunta.toString() + b.toString()) + '">') + tiposPreguntas(V[v], e, 2, l, i, r, o) + "</div>" } } g += "</div></div></div>" } g += "</div></div>" } else g += tiposPreguntas(a, e, 2, l, i, r, o); $("#formHorizontal" + t).append('<div class="form-group form-group-sm" id="divPreg' + a.idPregunta.toString() + '" style="' + z + '">' + g) } } function tiposPreguntas(a, t, n, i, e, r, o) { var l, d, s, u, g, p, c = {}, e = 0 < countObjeto(e, 2, 2 == n ? a.idPregunta : a.id), b = "", m = a.tipoPregunta.IdParametro.toString() == grupoCheckPadre ? "margin-top: 5px;" : ""; if (2 == n && (0 < (d = (l = a.pregunta).includes("#") ? l.split("#") : new String).length && (s = (s = 0) < d[1].indexOf("-") ? anoCabecera - parseInt(d[1].split("-")[1]) : 0 < d[1].indexOf("+") ? anoCabecera + parseInt(d[1].split("+")[1]) : anoCabecera, l = d[0] + s.toString() + d[2]), b = b + ('<label for="txt' + a.id + '" class="col-sm-4 control-label" style="' + m + '">' + (a.tipoPregunta.IdParametro.toString() == grupoCheckHijo ? "" : l)) + '</label><div class="col-sm-6">'), a.tipoPregunta.IdParametro.toString() != grupoCheckPadre) { if ((0 < countObjeto(plantillaBase, 2, 2 == n ? a.idPregunta : a.id) && "True" == permisoAbreCampos || -1 !== $.inArray(rol, rolesHiloComent)) && (etapa == etapaRevAnalista && a.tipoPregunta.IdParametro.toString() != textoReadonly && a.tipoPregunta.IdParametro.toString() != anos && a.tipoPregunta.IdParametro.toString() != etiqueta && a.tipoPregunta.IdParametro.toString() != etiquetaEspejo && a.tipoPregunta.IdParametro.toString() != totalValidacion && a.tipoPregunta.IdParametro.toString() != vacio || -1 !== $.inArray(rol, rolesHiloComent)) && (b += '<div class="input-group-sm">'), b = (b += '<input type="hidden" name="" value="' + (2 == n ? a.idPregunta : a.id) + '" />') + ('<input type="hidden" id="numTab' + (a.idPregunta.toString() + (null != a.idTab ? a.idTab : "")) + '" name="" value="' + (null != a.idTab ? a.idTab : "") + '" />'), a.tipoPregunta.IdParametro.toString() == texto) c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = (null != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab : ""), c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "texto", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), -1 !== $.inArray(rol, rolesHiloComent) && (b += '<div class="input-group">'), b += '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm" style="border-radius:3px;" id="' + (null != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab : "") + '" ' + (a.funcion.IdParametro.toString() == largoTexto ? "maxlength=" + a.valor_funcion[0].Valor.toString() : "") + ' placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" ' + (e ? "" : "readonly") + " />", -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<div class="input-group-btn"><button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button></div></div>'); else if (a.tipoPregunta.IdParametro.toString() == textoReadonly) b += '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm" style="border-radius:3px;" id="' + (null == a.idTab || "" == a.idTab ? "txt" + (2 == n ? a.idPregunta : a.id) : "txtTab" + (2 == n ? a.idPregunta : a.id) + a.idTab) + '" maxlength="' + a.tipoPregunta.Valor2 + '" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" readonly />'; else if (a.tipoPregunta.IdCategoria.toString() == numerico) c.idObjeto = (null != a.idTab && "" != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab && "" != a.idTab ? a.idTab : ""), c.idTab = null != a.idTab ? a.idTab : "", c.idPregunta = 2 == n ? a.idPregunta : a.id, c.tipo = "numerico", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), -1 !== $.inArray(rol, rolesHiloComent) && (b += '<div class="input-group">'), b += '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm numTab-' + (null != a.idTab ? a.idTab : "") + (1 == n ? " limpiaTxt" + a.IdTabla : "") + (a.tipoPregunta.IdParametro.toString() == numericoSuma ? " suma" + (1 == n ? a.IdTabla.toString() + a.columna.toString() + (null != a.idTab ? a.idTab.toString() : "") : a.idPregunta.toString() + (null != a.idTab ? "" : " validaDatos")) : "") + '" style="border-radius:3px;" id="' + (null != a.idTab && "" != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab && "" != a.idTab ? a.idTab : "") + '" maxlength="' + a.tipoPregunta.Valor2 + '" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" ' + (e ? "" : "readonly") + " />", -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<div class="input-group-btn"><button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button></div></div>'); else if (a.tipoPregunta.IdParametro.toString() == total) -1 !== $.inArray(rol, rolesHiloComent) && (b += '<div class="input-group">'), b += '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm total' + (2 == n ? a.idPregunta : a.id) + '" style="border-radius:3px;" id="' + (null != a.idTab && "" != a.idTab ? "Tab" : "") + "txt" + ((2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab.toString() : "")) + '" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" readonly />', -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<div class="input-group-btn"><button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button></div></div>'); else if (a.tipoPregunta.IdParametro.toString() == textoGrande) c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = null == a.idTab || "" == a.idTab ? "txt" + (2 == n ? a.idPregunta : a.id) : "txtTab" + (2 == n ? a.idPregunta : a.id) + a.idTab, c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "textoGrande", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), -1 !== $.inArray(rol, rolesHiloComent) && (b += '<div class="input-group">'), b = (b += '<textarea class="form-control input-sm" style="border-radius:3px;" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" rows="3" id="' + (null == a.idTab || "" == a.idTab ? "txt" + (2 == n ? a.idPregunta : a.id) : "txtTab" + (2 == n ? a.idPregunta : a.id) + a.idTab) + '"' + (a.funcion.IdParametro.toString() == largoTexto ? " maxlength=" + a.valor_funcion[0].Valor.toString() : "") + ' placeholder="Ingrese registro" aria-describedby="txtCount' + (2 == n ? a.idPregunta : a.id) + '"' + (e ? "" : " readonly") + ">" + (0 < i.length ? i[0].Respuesta : "") + "</textarea>") + ('<span id="txtCount' + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab : "") + '" class="help-block" style="font-size:12px;">' + (a.funcion.IdParametro.toString() == largoTexto ? "Caracteres restantes=" + a.valor_funcion[0].Valor.toString() : "") + "</span>"), -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<div class="input-group-btn"><button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button></div></div>'); else if (a.tipoPregunta.IdParametro.toString() == checkbox) c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id), c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "checkbox", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), b = (b += '<div class="checkbox" style="padding-top:6px;font-size:12px;">') + '<label><input type="checkbox" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" id="' + (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab.toString() : "") + '" style="margin-top:2px;" ' + (0 < i.length && null != i[0].Respuesta ? "checked" : "") + (e ? "" : " disabled") + ">" + a.pregunta + "</label></div>"; else if (a.tipoPregunta.IdCategoria.toString() == combo) { if (c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = (null != a.idTab && "" != a.idTab ? "Tab" : "") + "cmb" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab && "" != a.idTab ? a.idTab : ""), c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "combo", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", -1 !== $.inArray(rol, rolesHiloComent) && (b += '<div class="input-group">'), 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), b += '<select class="form-control input-sm numTab-' + (null != a.idTab ? a.idTab : "") + '" style="border-radius:3px;" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" id="' + (null != a.idTab && "" != a.idTab ? "Tab" : "") + "cmb" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab && "" != a.idTab ? a.idTab : "") + '"' + (e ? "" : " disabled") + ">", a.tipoPregunta.IdParametro.toString() == seleccione && (b += '<option value="-1"' + (0 < i.length && "-1" == i[0].Respuesta.toString() ? " selected=selected" : "") + ">Seleccione</option>"), 0 < a.valores.length && a.funcion.IdParametro.toString() != seleccioneVacio && $.each(a.valores, function (t, e) { e.IdParametro != e.IdCategoria && (b += '<option value="' + e.IdParametro + '"' + (0 < i.length && parseInt(i[0].Respuesta.toString()) == e.IdParametro ? " selected=selected" : "") + ">" + e.Descripcion + "</option>") }), a.tipoPregunta.IdParametro.toString() == comboNumerico && 0 < a.valor_funcion.length) for (var v = a.valor_funcion[0].Valor; v <= a.valor_funcion[0].Valor2; v++) b += '<option value="' + v + '"' + (0 < i.length && parseInt(i[0].Respuesta.toString()) == v ? " selected=selected" : "") + ">" + v + "</option>"; if (a.tipoPregunta.IdParametro.toString() == comboDinamico && (b += '<option value="-1"' + (0 < i.length && "-1" == i[0].Respuesta.toString() ? " selected=selected" : "") + ">Seleccione</option>", 0 < a.valor_funcion.length)) for (v = Number.isInteger(a.valor_funcion[0].Valor) ? anoCabecera + parseInt(a.valor_funcion[0].Valor) : Math.round(parseInt(a.valor_funcion[0].Valor.toString())) ; v <= (Number.isInteger(a.valor_funcion[0].Valor2) ? anoCabecera + parseInt(a.valor_funcion[0].Valor2) : Math.round(parseInt(a.valor_funcion[0].Valor2.toString()))) ; v++) b += '<option value="' + v + '"' + (0 < i.length && parseInt(i[0].Respuesta.toString()) == v ? " selected=selected" : "") + ">" + v + "</option>"; b += "</select>", -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<div class="input-group-btn"><button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button></div></div>') } else a.tipoPregunta.IdParametro.toString() == inputCheck ? (m = a.funcion.IdParametro.toString() == largoNumerico ? "return soloNumeros(event,true);" : "", b = (b = (b += '<div class="input-group">') + '<span class="input-group-addon" style="background-color:#FFF;"><input type="checkbox" aria-label="..." id="' + (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id) + '" style="cursor:pointer;" ' + (e ? "" : "disabled") + "></span>") + '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm" id="' + (null != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + '" onkeypress="' + m + '" ' + (a.funcion.IdParametro.toString() == largoTexto ? "maxlength=" + a.valor_funcion[0].Valor.toString() : "") + ' placeholder="Ingrese registro" aria-label="..." value="' + (0 < i.length ? i[0].Respuesta : "") + '" readonly /></div>') : a.tipoPregunta.IdCategoria.toString() == grupoCheck ? (m = e && a.funcion.IdParametro.toString() != inputBloquedo ? "" : "disabled", b = (b += '<div class="checkbox" style="padding-top:6px;font-size:12px;">') + '<label><input type="checkbox" class="numTab-' + (null != a.idTab ? a.idTab : "") + '" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" id="' + (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab.toString() : "") + '" style="margin-top:2px;" ' + (0 < i.length && null != i[0].Respuesta ? "checked " : "") + m + "> " + a.pregunta + "</label></div>") : a.tipoPregunta.IdParametro.toString() == anos ? 0 < a.valor_funcion.length && (b += anoCabecera + (a.valor_funcion[0].Valor + a.valor_funcion[0].Valor2)) : a.tipoPregunta.IdParametro.toString() == etiqueta ? (0 < (d = (l = a.pregunta).includes("#") ? l.split("#") : new String).length && (s = (s = 0) < d[1].indexOf("-") ? anoCabecera - parseInt(d[1].split("-")[1]) : 0 < d[1].indexOf("+") ? anoCabecera + parseInt(d[1].split("+")[1]) : anoCabecera, l = d[0] + s.toString() + d[2]), b += l) : a.tipoPregunta.IdParametro.toString() == etiquetaEspejo ? b += '<label class="lblEspejo' + (2 == n ? a.idPregunta : a.id) + '" style="font-weight:normal;"></label>' : a.tipoPregunta.IdParametro.toString() == totalValidacion ? b = (b = (b = (b = (b = (b += '<div id="divTotVal' + (2 == n ? a.idPregunta : a.id) + '">') + '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm total' + (2 == n ? a.idPregunta : a.id) + '" style="border-radius:3px;" id="txt' + ((2 == n ? a.idPregunta : a.id) + a.idTab) + '" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" readonly />') + '<span id="imgVal' + (2 == n ? a.idPregunta : a.id) + '" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" style="display:none;"></span>') + '<span id="valEstado' + (2 == n ? a.idPregunta : a.id) + '" class="sr-only" style="display:none;">(success)</span>') + '<span id="imgValError' + (2 == n ? a.idPregunta : a.id) + '" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" style="display:none;"></span>') + '<span id="valEstadoError' + (2 == n ? a.idPregunta : a.id) + '" class="sr-only" style="display:none;">(error)</span></div>' : a.tipoPregunta.IdParametro.toString() == checkboxVacio ? (c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id), c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "checkboxVacio", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), b = (b += '<div class="checkbox" style="padding-top:6px;font-size:12px;">') + '<label><input type="checkbox" class="numTab-' + a.idTab + (a.funcion.IdParametro.toString() == checkboxUnico ? " cbxunico" : "") + '" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" id="' + (null != a.idTab ? "Tab" : "") + "cbx" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab.toString() : "") + '" style="cursor:pointer;" ' + (0 < i.length && null != i[0].Respuesta ? "checked " : "") + (e ? "" : "disabled") + "></label></div>") : a.tipoPregunta.IdParametro.toString() == checkboxInline ? (c.idPregunta = 2 == n ? a.idPregunta : a.id, c.idObjeto = (null != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab : ""), c.idTab = null != a.idTab ? a.idTab : "", c.tipo = "checkboxInline", c.menuPadre = r, c.menuHijo = o, c.respuesta = 0 < i.length ? i[0].Respuesta : "", 0 < $.grep(validaciones, function (t) { return t.Valor === c.idPregunta }).length && camposValidar.push(c), b = (b = (b += '<div class="input-group">') + '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm numTab-' + a.idTab + (a.tipoPregunta.IdParametro.toString() == numericoSuma ? " suma" + a.idPregunta : "") + (null != a.idTab ? "" : " validaDatos") + '" id="' + (null != a.idTab ? "Tab" : "") + "txt" + (2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab : "") + '" maxlength="' + (0 < a.valor_funcion.length ? a.valor_funcion[0].Valor2 : "") + '" onkeypress="return soloNumeros(event,true);" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" ' + (e ? "" : "readonly") + '/><div class="input-group-btn">') + '<button type="button" class="btn btn-default btn-sm otrasOpciones' + a.idPregunta + '" value="-1" id="numTab-' + a.idPregunta + "-" + a.idTab + '">S/I</button>', -1 !== $.inArray(rol, rolesHiloComent) && (g = null != (u = 0 < comentarios.length ? $.grep(comentarios, function (t, e) { return t.IdPregunta === (2 == n ? a.idPregunta : a.id) }) : null) && 0 < u.length ? "fa-comment" : "fa-pencil-square-o", p = null != u && 0 < u.length ? "btn-success" : "btn-primary", b += '<button id="btnIngresarComent' + (2 == n ? a.idPregunta : a.id) + '" class="btn ' + p + ' btn-sm" type="button" data-toggle="tooltip" data-placement="right" title="Ingresar comentarios" onclick="ingresarComentarios(' + (2 == n ? a.idPregunta : a.id) + "," + (0 != a.idTab ? a.idTab : "") + "," + r + "," + o + ');"><i id="ibtnComent' + (2 == n ? a.idPregunta : a.id) + '" class="fa ' + g + '" aria-hidden="true"></i></button>'), b += '</div></div><span id="helpBlock" class="help-block" style="font-size:12px;">S/I = Sin información</span>') : a.tipoPregunta.IdParametro.toString() == inputValidaciones && (b = (b = (b += '<div id="divVal' + (2 == n ? a.idPregunta : a.id) + '" class="input-group">') + '<input type="text" name="' + (2 == n ? a.idPregunta : a.id) + "_" + (null != a.idTab ? a.idTab : "") + '" class="form-control input-sm total' + (2 == n ? a.idPregunta : a.id) + '" style="border-radius:3px;" id="txt' + ((2 == n ? a.idPregunta : a.id) + (null != a.idTab ? a.idTab.toString() : "")) + '" placeholder="Ingrese registro" value="' + (0 < i.length ? i[0].Respuesta : "") + '" readonly aria-describedby="helpVal' + (2 == n ? a.idPregunta : a.id) + '" />') + '<span id="helpVal' + (2 == n ? a.idPregunta : a.id) + '" class="help-block"></span></div>'); (0 < countObjeto(plantillaBase, 2, 2 == n ? a.idPregunta : a.id) && "True" == permisoAbreCampos || -1 !== $.inArray(rol, rolesHiloComent)) && (etapa == etapaRevAnalista && a.tipoPregunta.IdParametro.toString() != textoReadonly && a.tipoPregunta.IdParametro.toString() != anos && a.tipoPregunta.IdParametro.toString() != etiqueta && a.tipoPregunta.IdParametro.toString() != etiquetaEspejo && a.tipoPregunta.IdParametro.toString() != totalValidacion && a.tipoPregunta.IdParametro.toString() != vacio ? b += '<span class="input-group-addon" style="border:0;background-color:transparent;"><input type="checkbox" class="cbkTodos' + r.toString() + o.toString() + '" name="cbkPregIterar" style="cursor:pointer;" aria-label="..." value="' + (2 == n ? a.idPregunta : a.id) + '"></span></div>' : -1 !== $.inArray(rol, rolesHiloComent) && (b += "</div>")) } return 2 == n && (b += "</div>"), b += "" } function countObjeto(t, a, n) { var i = 0; return 0 < t.length && $.each(t, function (t, e) { 1 == a ? e.Orden == n && i++ : 2 == a && e.IdPregunta == n && i++ }), i } function agregaComentarios(r, t, o) { t = { url: ROOT + "Formulario/BuscaComentarios", data: { _id: t, menu: r }, type: "post", datatype: "json", async: !1, success: function (t, e, a) { var n, i, t = JSON.parse(t); 0 < t.length && (n = t.map(function (t) { return t.IdConsulta }), i = Math.max.apply(null, n), $.each(t, function (t, e) { var a = '<div class="panel-group" id="accordion' + r + e.IdConsulta + '" role="tablist" aria-multiselectable="true" style="margin-top: 15px;"><div class="panel panel-default"><div class="panel-heading" role="tab" id="headingOne' + r + e.IdConsulta + '"><h4 class="panel-title" style="font-size:14px;"><a role="button" data-toggle="collapse" data-parent="#accordion' + r + e.IdConsulta + '" href="#collapseOne' + r + e.IdConsulta + '" aria-expanded="true" aria-controls="collapseOne">' + e.Tema + '</a></h4></div><div id="collapseOne' + r + e.IdConsulta + '" class="panel-collapse collapse ' + (e.IdConsulta == i ? "in" : "") + '" role="tabpanel" aria-labelledby="headingOne"><div class="panel-body" style="font-size:12px;"><dl id="panelComentConsultas' + r + e.IdConsulta + '" style="font-size: 13px;"><dt>' + e.Tipo + " - " + e.Usuario + " - " + moment(e.Fecha).format("DD/MM/YYYY HH:mm:ss") + "</dt><dd>" + e.Consulta + '</dd></dl><p class="text-right"><button type="button" id="btnRespComent' + r + e.IdConsulta + '" class="btn btn-primary btn-xs" style="margin-right: 10px;" data-toggle="tooltip" data-placement="right" title="Responder comentario" onclick="respuestasConsultas(' + e.IdConsulta + ');"><span class="fa fa-pencil-square-o" aria-hidden="true"></span></button></p></div></div>'; $("#formHorizontal" + o).append(a), agregaRespuestasComentarios(e.IdConsulta, r) })) }, error: function (t, e, a) { $("#txtMensajesFormulario").empty(), $("#txtMensajesFormulario").html("<p>" + a + "</p>"), $("#modalMensajesFormularios").modal("show"), console.log(a) } }; $.ajax(t) } function agregaRespuestasComentarios(n, i) { var t = { url: ROOT + "Formulario/BuscaRespuestasComentarios", data: { idConsulta: n }, type: "post", datatype: "json", async: !1, success: function (t, e, a) { t = JSON.parse(t); 0 < t.length && $.each(t, function (t, e) { e = '<div style="font-size:12px; margin-left: 20px; margin-top: 10px;"><dt>Respuesta - ' + e.Usuario + " - " + moment(e.Fecha).format("DD/MM/YYYY HH:mm:ss") + "</dt><dd>" + e.Respuesta + "</dd></div>"; $("#panelComentConsultas" + i + n).append(e) }) }, error: function (t, e, a) { $("#txtMensajesFormulario").empty(), $("#txtMensajesFormulario").html("<p>" + a + "</p>"), $("#modalMensajesFormularios").modal("show"), console.log(a) } }; $.ajax(t) } function respuestasConsultas(t) { $("#txtIdConsulta").val(t), $("#modalRespuestasConsultas").modal("show") }